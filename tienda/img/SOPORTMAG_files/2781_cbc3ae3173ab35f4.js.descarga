(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2781],{41363:function(e){e.exports={defaultContainer:"defaultContainer--dF6n",inner:"inner-1gGMC",expandContent:"expandContent-2UrUZ",expandContainer:"expandContainer-3nkRD",noHover:"noHover-3qPuH",showExpandAni:"showExpandAni-DpVmT",showBoxShadow:"showBoxShadow-2xK2-",scrollAnimateDelay:"scrollAnimateDelay-22VsZ",scrollAnimate:"scrollAnimate-3ykMP"}},49774:function(e){e.exports={video:"video-2LlV5",videoPlay:"videoPlay-1JQ-6"}},62813:function(e){e.exports={container:"container-2vjjK",innerCls:"innerCls-2lAEW",contentCls:"contentCls-3f4D_",text:"text-1UhOK",icon:"icon-285Gf",newStyle:"newStyle-1Vwkl",scrollAnimateDelay:"scrollAnimateDelay-2CiST",scrollAnimate:"scrollAnimate-3-0L3"}},60661:function(e,n,t){"use strict";t.d(n,{G0:function(){return a},Jl:function(){return u},Q8:function(){return i}});var r=t(77774),o=t(52321),a=function(){var e={listId:(0,r.x)(32),scene:"sim_goods_category"};return(0,o.S6)({url:(0,o.mx)("/api/poppy/v1/opt_list",e),params:e,config:{useAntiToken:!0}}).then((function(e){var n,t;return(null==e||null==(t=e.result)||null==(n=t.data)?void 0:n.optList)||[]})).catch((function(e){}))},i=function(e){var n=e.pageSn,t=e.pageElSn,r=e.offset,a=e.imgSearchUrl,i=e.imgSearchBytes,u={offset:r,pageSize:20,scene:"window_find_sim_img",listId:e.listId,pageSn:n,pageElSn:t,imgSearchUrl:a,imgSearchBytes:i,filterItems:e.filterItems};return(0,o.S6)({url:(0,o.mx)("/api/poppy/v1/find_sim",u),params:u,config:{useAntiToken:!0}}).then((function(e){var n=null==e?void 0:e.result,t=n.hasMore,r=n.data||{},o=r.filterRegion,a=r.goodsList;return{goodsList:a,rankColumFilter:null==o?void 0:o.rankColumFilter,hasMore:t&&!!(null==a?void 0:a.length)}})).catch((function(e){return{hasMore:!1}}))},u=function(e){var n={pageSize:20,scene:"gd_return_opt_landing",pageSn:e.pageSn,offset:e.offset,optId:e.optId,listId:e.listId,filterItems:e.filterItems};return(0,o.S6)({url:(0,o.mx)("/api/poppy/v1/search",n),params:n,config:{useAntiToken:!0}}).catch((function(e){}))}},13384:function(e,n,t){"use strict";t.d(n,{Z:function(){return h},x:function(){return m}});var r=t(81862),o=t(94761),a=t(89290),i=t(8226),u=t(50853),l=(t(69460),t(96526)),s=t(75808),c=t(77774),d=t(95506),f=t(60661),v=t(52321),p=t(29458),m=function(e){return e.SIMILAR="sku_close_similar",e.BOUGHT_TOGETHER="mall_bought_together",e.BOUGHT_TOGETHER_LANDING="mall_bought_together_landing",e.RECOMMEND_WORDS_SKU_CLOSE="sku_close_recommend_words",e.RECOMMEND_WORDS_GT_RETURN="gd_return_recommend_words",e.ADD_CART_SUCCESS_RELEATED="shopping_cart_add_show_floating_layer",e}({}),_={goodsList:[],hasMore:!0},g={goodsList:[],hasMore:!1};function h(e){var n=e.listId,t=e.pageSn,m=e.goodsId,h=e.pageSize,E=void 0===h?10:h,y=e.scene,S=e.pageElSn,C=void 0===S?205632:S,L=e.source,D=e.topGoods,w=e.showNewSimilarDialog,T=e.imgSearchUrl,M=(0,l.useRef)([]),b=(0,a._)((0,l.useState)(_),2),R=b[0],I=b[1],x=(0,r._)((function(e){var r,a,i,l,_,h,S,M,b,R,I,x,k,A,N,U;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=(e||{}).offset,a=void 0===r?0:r,i=y||e.scene,l=v.ce.MALL_HOME_RECOMMEND,"sku_close_similar"===i&&(l=v.ce.GOODS_DETAIL),"sku_close_similar"===i&&w?T?(h=(0,s.FT)(T,(0,o._)({},d.DJ.GOODS_MIDDLE,{format:""})),[4,(0,p.y)(h)]):[3,2]:[3,4];case 1:if(!(_=u.sent()))return[2,g];u.label=2;case 2:return[4,(0,f.Q8)({pageElSn:222268,pageSn:t,offset:0,listId:(0,c.x)(32),imgSearchBytes:_})];case 3:return S=u.sent(),b=(M=S||{}).goodsList,R=M.hasMore,I=M.rankColumFilter,(null==b?void 0:b.length)?[2,{goodsList:b,hasMore:R,imgSearchBytes:_,rankColumFilter:I}]:[2,g];case 4:return[4,(0,v.$h)(l,{pageSn:t,mainGoodsIds:[m],listId:n||(0,c.x)(6),offset:a,pageSize:E,scene:i,source:L,pageElSn:C,goodsId:m,topGoods:0===a?D:void 0})];case 5:return(x=u.sent())&&x.success&&x.result?(k=x.result,A=k.data,N=k.hasMore,[2,{goodsList:null!=(U=A.goodsList)?U:[],hasMore:N}]):[2,g]}}))})),k=(0,r._)((function(e){var n,t,r,o,a,i,l;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return(null==(n=M.current)?void 0:n.length)>0?[2]:[4,x(e)];case 1:return t=u.sent(),r=t.goodsList,o=void 0===r?[]:r,a=t.hasMore,i=t.imgSearchBytes,l=t.rankColumFilter,M.current=o,I({goodsList:M.current,hasMore:a,imgSearchBytes:i,rankColumFilter:l}),[2]}}))})),A=(0,r._)((function(){var e,n,t,r,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return[4,x({offset:null==(e=M.current)?void 0:e.length})];case 1:return n=a.sent(),t=n.goodsList,r=void 0===t?[]:t,o=n.hasMore,M.current=(0,i._)(M.current).concat((0,i._)(r)),I({goodsList:M.current,hasMore:o}),[2]}}))}));return(0,o._)({},R,{loadData:k,loadMore:A,clear:function(){return 0!==M.current.length&&(M.current=[],I(_),!0)}})}},52321:function(e,n,t){"use strict";t.d(n,{$h:function(){return f},KU:function(){return s},S6:function(){return c},be:function(){return r},ce:function(){return l},mx:function(){return d}});var r,o=t(94761),a=(t(69460),t(76726)),i=t(57411),u=t(52143),l=function(e){return e.SIMILAR_GOODS_LIST="/api/poppy/v1/goods_detail",e.GOODS_DETAIL="/api/poppy/v1/goods_detail",e.MALL_HOME_RECOMMEND="/api/poppy/v1/mall_home_recommend",e.SEARCH_HOT_QUERY="/api/poppy/v1/search_hot_query",e.ADD_CART_SUCCESS_RECOMMEND="/api/poppy/v1/shopping_cart",e}({});function s(e){var n=(void 0===e?{}:e).pageSn,t=void 0===n?"":n;if(r)return r;var o={pageId:(0,a.Vm)(t)};return r=(0,u.createDefaultAxios)({pageInfo:o})}var c=function(e){r||s();var n=e||{},t=n.url,a=n.params,u=n.config,l=(0,o._)({useNativeAntiToken:!0,useResponseCamel:!0,responseCamelExcludedKeys:["pRec","pSearch"]},u||{});return r.post(t,a,l).then((function(e){return function(e){var n=e.data,t=e.options||{},r=t.params,o=t.config,a=t.format;return"function"==typeof a?a(n,r):(null==o?void 0:o.useResponseCamel)?(0,i.zW)(n,o.responseCamelExcludedKeys||[]):n}({data:e,options:{url:t,params:a,config:l}})}))},d=function(e,n){return e&&n?(null==n?void 0:n.scene)?e+"?scene="+n.scene:e:""},f=function(e,n){return c({url:d(e,n),params:n,config:{useAntiToken:!0}}).catch((function(){return{}}))}},29458:function(e,n,t){"use strict";t.d(n,{y:function(){return o}});t(69632),t(87246),t(21531),t(80978),t(11183),t(44718);var r=t(20306);t(4256),t(17385);var o=function(e,n){void 0===n&&(n=!0);var t=function(){var e,n;return{promise:new Promise((function(t,r){e=t,n=r})),resolve:e,reject:n}}(),o=t.promise,a=t.resolve;try{var i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="blob",i.onload=function(){if(200===i.status){var e=i.response,t=new FileReader;t.onloadend=function(){var e=n?function(e){void 0===e&&(e="");var n=/^data:image\/[^;]+;base64,/;return n.test(e)?e.replace(n,""):e}(t.result):t.result;a(e)},t.readAsDataURL(e)}},i.onerror=function(){(0,r.K2)(new Error("requestImgError"),{imageUrl:e})},i.send(),o}catch(n){(0,r.K2)(new Error("imgUrlToBase64"),{data:JSON.stringify(n),imageUrl:e})}}},29623:function(e,n,t){"use strict";t.d(n,{H:function(){return E},Z:function(){return S}});var r=t(87612),o=t(94761),a=t(12330),i=t(89290),u=t(96526),l=t(72779),s=t.n(l),c=t(54814),d=t(13090),f=t(95482),v=(0,u.memo)((function(e){var n=e.children,t=e.className;return u.createElement("div",{className:t},n)})),p=t(64391),m=t(41363),_=t.n(m),g=function(e){var n=e.className,t=e.noHover,r=e.payload,a=e.reporter,i=e.onClick,l=e.goodsId,p=e.title,m=e.classConfig,g=e.children,h=e.tooltipDisabled,E=e.onMouseUp,y=e.onMouseDown,S=e.innerStyle,C=e.useRole,L=void 0===C||C,D=(0,d.F)({onClick:i}),w=h?v:f.IH,T=L?{role:"group",tabIndex:0,"aria-label":p}:{role:null,tabIndex:null};return u.createElement(c.ZP,{payload:r,reporter:a},u.createElement("div",(0,o._)({className:s()(_().defaultContainer,n,null==m?void 0:m.goodsItemWrap)},D,{onMouseUp:E,onMouseDown:y},T),u.createElement(w,{className:s()(_().inner,null==m?void 0:m.goodsItem),id:"goodContainer-"+l,title:p,hidden:t,style:S},g)))},h=function(e){var n,t=e.className,a=e.noHover,l=e.payload,v=e.reporter,p=e.onClick,m=e.goodsId,g=e.title,h=e.children,E=e.classConfig,y=e.onMouseUp,S=e.onMouseDown,C=e.useRole,L=void 0===C||C,D=(0,i._)((0,u.useState)(),2),w=D[0],T=D[1],M=(0,u.useRef)(null),b=(0,d.F)({onClick:p}),R=L?{role:"button",tabIndex:0,"aria-label":g}:{role:null,tabIndex:null},I=(0,u.useCallback)((function(){M.current&&T({height:M.current.offsetHeight+"px"})}),[]);return(0,u.useEffect)((function(){return I(),window.addEventListener("resize",I),function(){window.removeEventListener("resize",I)}}),[I]),u.createElement(c.ZP,{payload:l,reporter:v},u.createElement("div",(0,o._)({className:s()(_().defaultContainer,t,(n={},(0,r._)(n,_().expandContainer,!!w),(0,r._)(n,_().noHover,a),n),null==E?void 0:E.goodsItemWrap),"aria-label":g},b,{onMouseUp:y,onMouseDown:S},R),u.createElement("div",{style:w,className:_().placeholder}),u.createElement("div",(0,o._)({className:_().inner},(0,f.pk)({id:"goodContainer-"+m,title:g,fixed:!1,hidden:a}),{ref:M}),h)))},E=function(e){var n=e.children;return u.createElement("div",{className:_().expandContent},n)},y=function(e){var n=e.type,t=(0,a._)(e,["type"]);return n===p.l.expand?u.createElement(h,t):u.createElement(g,t)},S=(0,u.memo)(y)},64391:function(e,n,t){"use strict";t.d(n,{P:function(){return o},l:function(){return r}});var r=function(e){return e.default="default",e.expand="expand",e}({}),o=function(e){return e.DEFAULT="DEFAULT",e.SCALE="SCALE",e.NONE="NONE",e}({})},63875:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(81862),o=t(87612),a=t(94761),i=t(89290),u=t(50853),l=t(96526),s=t(72779),c=t.n(s),d=t(34161),f=t(75808),v=(t(31629),t(15097),t(84163),t(95850),t(73631),t(71399),t(91211),t(70309),t(99492),t(17385),t(86687)),p=t(1369),m=t(49774),_=t.n(m),g=(0,l.forwardRef)((function(e,n){var t=e.videoURL,s=e.poster,m=e.className,g=e.isCrawler,h=e.style,E=e.pageElSn,y=e.goodsId,S=e.grayConfig,C=(0,l.useRef)(),L=(0,l.useRef)(),D=(0,i._)((0,l.useState)({show:g,isPlayVideo:!1}),2),w=D[0],T=D[1],M=function(e){var n=(0,l.useRef)(),t=(0,l.useRef)(null),r=(0,l.useRef)({startLoadSourceTime:0,startPlayVideoTime:0,playingDuration:0,stallCount:0,stallDuration:0,playNum:0,duration:0,errorCodeStr:""}),o=(0,l.useRef)({start:0}),i=(0,p.t)((function(n){var t,r;(null==e||null==(r=e.grayConfig)||null==(t=r[218762])?void 0:t.value)&&(0,v.oP)(n)})),u=(0,p.t)((function(){if(!e.videoURL)return"";var n=new URL(e.videoURL);return(null==n?void 0:n.host)||""})),s={op:"event",sub_op:"video_end",page_el_sn:234427,business_id:"pc_list_hove_video",sub_business_id:e.page_el_sn,goods_id:e.goodsId},c=(0,p.t)((function(){var e;"number"==typeof(null==(e=t.current)?void 0:e.duration)&&(r.current.duration=t.current.duration)})),d=(0,p.t)((function(e){var n,t,o,l,c=(0,a._)({},s,{error_code_str:(null==(t=e.target)||null==(n=t.error)?void 0:n.message)||"source fail",playing_duration:0,stall_count:0,stall_duration:0,fst_core_start_dur:0,video_will_play:0,video_host_name:u()});r.current.errorCodeStr=(null==(l=e.target)||null==(o=l.error)?void 0:o.message)||"source fail",i(c)})),f=(0,p.t)((function(){r.current.startPlayVideoTime||(r.current.startPlayVideoTime=Date.now())})),m=(0,p.t)((function(){var e;t.current&&t.current.currentTime>0&&(o.current.start=Date.now(),r.current.stallCount+=1),0===(null==(e=t.current)?void 0:e.currentTime)&&(r.current.playNum+=1)})),_=(0,p.t)((function(){if(t.current){var e=Date.now();o.current.start&&o.current.start>r.current.startLoadSourceTime&&o.current.start<e&&(r.current.stallDuration+=e-o.current.start,o.current.start=0)}})),g=(0,p.t)((function(){var e,n;r.current.playingDuration=Math.max(r.current.playNum-1,0)*((null==(e=t.current)?void 0:e.duration)||r.current.duration)+((null==(n=t.current)?void 0:n.currentTime)||0)}));return(0,l.useEffect)((function(){if(e.videoURL&&e.show&&t.current){var n=t.current;return n.addEventListener("loadedmetadata",c),n.addEventListener("error",d),n.addEventListener("play",f),n.addEventListener("waiting",m),n.addEventListener("playing",_),n.addEventListener("pause",g),function(){n.removeEventListener("loadedmetadata",c),n.removeEventListener("error",d),n.removeEventListener("play",f),n.removeEventListener("waiting",m),n.removeEventListener("playing",_),n.removeEventListener("pause",g)}}}),[e.videoURL,e.show]),{videoRef:t,videoData:r,onLoadstart:function(){n.current=setTimeout((function(){var n,t;r.current.startLoadSourceTime=Date.now(),r.current.startPlayVideoTime=0,(null==e||null==(t=e.grayConfig)||null==(n=t[218762])?void 0:n.value)&&(0,v.oP)({op:"event",sub_op:"video_start",page_el_sn:234427,goods_id:e.goodsId})}),400)},onEnded:function(){r.current.startLoadSourceTime?setTimeout((function(){if(!r.current.errorCodeStr){var e=(0,a._)({},s,{playing_duration:Math.floor(1e3*r.current.playingDuration),stall_count:r.current.stallCount,stall_duration:o.current.start?r.current.stallDuration+(Date.now()-o.current.start):r.current.stallDuration,fst_core_start_dur:Math.max(r.current.startPlayVideoTime-r.current.startLoadSourceTime,0),video_will_play:r.current.playingDuration?1:0,video_host_name:u()});i(e)}r.current={startLoadSourceTime:0,startPlayVideoTime:0,playingDuration:0,stallCount:0,stallDuration:0,playNum:0,duration:0,errorCodeStr:""},o.current.start=0}),10):clearTimeout(n.current)}}}({videoURL:t,page_el_sn:E,goodsId:y,show:w.show,grayConfig:S}),b=M.videoRef,R=M.onLoadstart,I=M.onEnded,x=(0,l.useCallback)((function(e){var n,r=e.restart,o=void 0===r||r,i=e.cb;t&&!w.isPlayVideo&&(!w.show&&T((function(e){return(0,a._)({},e,{show:!0})})),g&&!(null==S||null==(n=S[218762])?void 0:n.crawler)||R(),C.current=setTimeout((function(){(null==b?void 0:b.current)&&(i&&i(!0),T((function(e){return(0,a._)({},e,{isPlayVideo:!0})})),o&&(b.current.currentTime=0),L.current=b.current.play())}),500))}),[t,w.isPlayVideo]),k=(0,l.useCallback)((0,r._)((function(e){var n,r;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return n=e.cb,t&&(null==b?void 0:b.current)?(clearTimeout(C.current),n&&n(!1),T((function(e){return(0,a._)({},e,{isPlayVideo:!1})})),[4,L.current]):[2];case 1:return o.sent(),b.current.pause(),g&&!(null==S||null==(r=S[218762])?void 0:r.crawler)||I(),[2]}}))})),[t]);(0,l.useEffect)((function(){return function(){(null==C?void 0:C.current)&&clearTimeout(null==C?void 0:C.current)}}),[]),(0,l.useImperativeHandle)(n,(function(){return{onStart:x,onStop:k}}),[]);var A=(0,l.useMemo)((function(){return s?(0,d.Hm)((0,f.FT)(s,{webpEnable:!0,resizeWidth:500,quality:60})):""}),[s]);return(0,l.useEffect)((function(){return function(){(null==C?void 0:C.current)&&clearTimeout(null==C?void 0:C.current)}}),[]),t&&s&&w.show?l.createElement("video",{style:h,src:(0,d.Hm)(t),poster:A,ref:b,muted:!0,loop:!0,className:c()(_().video,m,(0,o._)({},_().videoPlay,w.isPlayVideo))}):null})),h=(0,l.memo)(g)},20246:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var r=t(87612),o=t(94761),a=t(96526),i=t(72779),u=t.n(i),l=t(28217),s=t(1070),c=t(2014),d=function(e,n){var t,r=(0,s.$)("bec-fe.svg-icons-h5"),i=r.t,u=r.i18n;return a.createElement(c.l,(0,o._)({},e,{"aria-label":null!=(t=e["aria-label"])?t:u.exists("aria-label.InputShow",{ns:"bec-fe.svg-icons-h5"})?i("aria-label.InputShow"):void 0,ref:n,path:"M512 213.3c188.2 0 350.6 131 425.4 329.2-74.8 179.8-237.1 310.8-425.4 310.8-188.2 0-350.6-131-425.4-310.7 74.8-198.3 237.1-329.3 425.4-329.3z m0 149.4c-94.3 0-170.7 76.4-170.7 170.6 0 94.3 76.4 170.7 170.7 170.7 94.3 0 170.7-76.4 170.7-170.7 0-94.3-76.4-170.7-170.7-170.6z m0 46.9c68.3 0 123.7 55.4 123.7 123.7 0 68.3-55.4 123.7-123.7 123.8-68.3 0-123.7-55.4-123.7-123.8 0-68.3 55.4-123.7 123.7-123.7z"}))},f=a.forwardRef(d),v=t(49e3),p=t(62813),m=t.n(p),_=function(e){var n=e.open,t=e.backRgb,i=e.text,c=e.onClick,d=e.addCart,p=e.trackingInfo,_=e.classConfig,g=e.pageElSn,h=e.onMouseDown,E=(0,s.$)("bec-fe.bui-web-goods-list").t,y=(0,a.useMemo)((function(){return(0,o._)({},p,{ad:void 0})}),[p]),S=(0,a.useMemo)((function(){return{autoAddSingleSku:!1,tracking:{source:"quickLookToCart"},imprEventData:(0,o._)({page_el_sn:206955},y||{}),clickEventData:(0,o._)({page_el_sn:206955},y||{}),customEventLog:{close:(0,o._)({click:206956},y||{}),allDetail:(0,o._)({click:206957},y||{})}}}),[y]),C=(0,a.useCallback)((function(e){(0,l.sP)((0,o._)({page_el_sn:g||206954},p||{})),d&&d(e,S),c&&c(e,S)}),[g,p,d,S,c]),L=(0,a.useCallback)((function(e){h&&h(e,S)}),[h,S]),D=(null==i?void 0:i.text)||E("quickLookBtn");return n&&D?a.createElement(v.Z,{type:"border",size:"md",className:u()(m().container,null==_?void 0:_.container,(0,r._)({},m().newStyle,!0)),onClick:C,contentCls:u()(m().contentCls,null==_?void 0:_.contentCls),innerCls:u()(m().innerCls,null==_?void 0:_.innerCls),innerStyle:{backgroundColor:t},onMouseDown:L},a.createElement(f,{"aria-hidden":!0,className:u()(m().icon,null==_?void 0:_.icon)}),a.createElement("span",{className:u()(m().text,null==_?void 0:_.text)},D)):null},g=(0,a.memo)(_)}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/2781_cbc3ae3173ab35f4.js.map