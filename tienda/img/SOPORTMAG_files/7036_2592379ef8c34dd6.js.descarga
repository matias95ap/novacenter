(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7036],{12926:function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},77847:function(t){t.exports=s,s.default=s,s.stable=c,s.stableStringify=c;var e="[...]",n="[Circular]",i=[],r=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(t,e,n,s){var a;void 0===s&&(s=o()),u(t,"",0,[],void 0,0,s);try{a=0===r.length?JSON.stringify(t,e,n):JSON.stringify(t,h(e),n)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==i.length;){var l=i.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return a}function a(t,e,n,o){var s=Object.getOwnPropertyDescriptor(o,n);void 0!==s.get?s.configurable?(Object.defineProperty(o,n,{value:t}),i.push([o,n,e,s])):r.push([e,n,t]):(o[n]=t,i.push([o,n,e]))}function u(t,i,r,o,s,l,c){var p;if(l+=1,"object"==typeof t&&null!==t){for(p=0;p<o.length;p++)if(o[p]===t)return void a(n,t,i,s);if(void 0!==c.depthLimit&&l>c.depthLimit)return void a(e,t,i,s);if(void 0!==c.edgesLimit&&r+1>c.edgesLimit)return void a(e,t,i,s);if(o.push(t),Array.isArray(t))for(p=0;p<t.length;p++)u(t[p],p,p,o,t,l,c);else{var h=Object.keys(t);for(p=0;p<h.length;p++){var f=h[p];u(t[f],f,p,o,t,l,c)}}o.pop()}}function l(t,e){return t<e?-1:t>e?1:0}function c(t,e,n,s){void 0===s&&(s=o());var a,u=p(t,"",0,[],void 0,0,s)||t;try{a=0===r.length?JSON.stringify(u,e,n):JSON.stringify(u,h(e),n)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==i.length;){var l=i.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return a}function p(t,r,o,s,u,c,h){var f;if(c+=1,"object"==typeof t&&null!==t){for(f=0;f<s.length;f++)if(s[f]===t)return void a(n,t,r,u);try{if("function"==typeof t.toJSON)return}catch(t){return}if(void 0!==h.depthLimit&&c>h.depthLimit)return void a(e,t,r,u);if(void 0!==h.edgesLimit&&o+1>h.edgesLimit)return void a(e,t,r,u);if(s.push(t),Array.isArray(t))for(f=0;f<t.length;f++)p(t[f],f,f,s,t,c,h);else{var d={},g=Object.keys(t).sort(l);for(f=0;f<g.length;f++){var m=g[f];p(t[m],m,f,s,t,c,h),d[m]=t[m]}if(void 0===u)return d;i.push([u,r,t]),u[r]=d}s.pop()}}function h(t){return t=void 0!==t?t:function(t,e){return e},function(e,n){if(r.length>0)for(var i=0;i<r.length;i++){var o=r[i];if(o[1]===e&&o[0]===n){n=o[2],r.splice(i,1);break}}return t.call(this,e,n)}}},93759:function(t,e,n){var i=n(13324),r=n(82857),o=n(17297);t.exports=function(t,e,n){for(var s=-1,a=e.length,u={};++s<a;){var l=e[s],c=i(t,l);n(c,l)&&r(u,o(l,t),c)}return u}},12439:function(t){t.exports={row:"row-33qP2",point:"point-3_U1f",succIcon:"succIcon-3Iwgd",checkoutIcon:"checkoutIcon-1H0bg",succText:"succText-3aM0A",cursor:"cursor-1zrtE",toastWrapWithBtn:"toastWrapWithBtn-19Uvo",btnRow:"btnRow-2zqcn",btn:"btn-2Gv61",btnInner:"btnInner-1c8C4",btnText:"btnText-24M3J",primary:"primary-3BXlJ",goodsList:"goodsList-CLZ1a",threeImages:"threeImages-1SLaa",goodsItem:"goodsItem-1uLbn",goodsItemMask:"goodsItemMask-24oaX",goodsTag:"goodsTag-dWFQF"}},48188:function(t){t.exports={roundImgWrap:"roundImgWrap-3Ddz6",inlineFlex:"inlineFlex-3NBhO",roundImg:"roundImg-2whW3",canClick:"canClick-11G9M",strike:"strike-34PL1",underline:"underline-1Imjk",lineThrough:"lineThrough-2rRp0",vAlignMiddle:"vAlignMiddle-2W1FH",vAlignOffset:"vAlignOffset-3pojr",bgBorder:"bgBorder-3DLT8"}},58374:function(t){t.exports={wrap:"wrap-h0OuU",circle:"circle-H2AUR",title:"title-1MlLb",desc:"desc-2hpQD",btn:"btn-2YvDP"}},66545:function(t){"use strict";function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(t){i.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this._defaults.push({fn:t,args:n}),this}})),i.prototype._setDefaults=function(t){this._defaults.forEach((function(n){t[n.fn].apply(t,e(n.args))}))},t.exports=i},139:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r;"undefined"!=typeof window?r=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),r=void 0):r=self;var o=n(12926),s=n(77847),a=n(19126),u=n(2474),l=n(73354),c=n(99228),p=n(66545);function h(){}t.exports=function(t,n){return"function"==typeof n?new e.Request("GET",t).end(n):1===arguments.length?new e.Request("GET",t):new e.Request(t,n)};var f=e=t.exports;e.Request=b,f.getXHR=function(){if(r.XMLHttpRequest&&(!r.location||"file:"!==r.location.protocol||!r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw new Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function g(t){if(!l(t))return t;var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&m(e,n,t[n]);return e.join("&")}function m(t,e,n){if(void 0!==n)if(null!==n)if(Array.isArray(n))n.forEach((function(n){m(t,e,n)}));else if(l(n))for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&m(t,"".concat(e,"[").concat(i,"]"),n[i]);else t.push(encodeURI(e)+"="+encodeURIComponent(n));else t.push(encodeURI(e))}function y(t){for(var e,n,i={},r=t.split("&"),o=0,s=r.length;o<s;++o)-1===(n=(e=r[o]).indexOf("="))?i[decodeURIComponent(e)]="":i[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return i}function v(t){return/[/+]json($|[^-\w])/i.test(t)}function _(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,n,i,r,o=t.split(/\r?\n/),s={},a=0,u=o.length;a<u;++a)-1!==(e=(n=o[a]).indexOf(":"))&&(i=n.slice(0,e).toLowerCase(),r=d(n.slice(e+1)),s[i]=r);return s}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function b(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",(function(){var t,e=null,i=null;try{i=new _(n)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,n.xhr?(e.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",i);try{n._isResponseOK(i)||(t=new Error(i.statusText||i.text||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=i,t.status=i.status,n.callback(t,i)):n.callback(null,i)}))}function E(t,e,n){var i=f("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i}f.serializeObject=g,f.parseString=y,f.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},f.serialize={"application/x-www-form-urlencoded":a.stringify,"application/json":s},f.parse={"application/x-www-form-urlencoded":y,"application/json":JSON.parse},c(_.prototype),_.prototype._parseBody=function(t){var e=f.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&v(this.type)&&(e=f.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},_.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,i="cannot ".concat(e," ").concat(n," (").concat(this.status,")"),r=new Error(i);return r.status=this.status,r.method=e,r.url=n,r},f.Response=_,o(b.prototype),u(b.prototype),b.prototype.type=function(t){return this.set("Content-Type",f.types[t]||t),this},b.prototype.accept=function(t){return this.set("Accept",f.types[t]||t),this},b.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"===i(e)&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,n,(function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")}))},b.prototype.query=function(t){return"string"!=typeof t&&(t=g(t)),t&&this._query.push(t),this},b.prototype.attach=function(t,e,n){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},b.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.ca=b.prototype.agent,b.prototype.buffer=b.prototype.ca,b.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},b.prototype.pipe=b.prototype.write,b.prototype._isHost=function(t){return t&&"object"===i(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},b.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||h,this._finalizeQueryString(),this._end()},b.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},b.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=f.getXHR();var e=this.xhr,n=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var n=e.readyState;if(n>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===n){var i;try{i=e.status}catch(t){i=0}if(!i){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var i=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100,100===n.percent&&clearTimeout(t._uploadTimeoutTimer)),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.addEventListener("progress",i.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",i.bind(null,"upload"))}catch(t){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof n&&!this._isHost(n)){var r=this._header["content-type"],o=this._serializer||f.serialize[r?r.split(";")[0]:""];!o&&v(r)&&(o=f.serialize["application/json"]),o&&(n=o(n))}for(var s in this.header)null!==this.header[s]&&Object.prototype.hasOwnProperty.call(this.header,s)&&e.setRequestHeader(s,this.header[s]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===n?null:n)},f.agent=function(){return new p},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(t){p.prototype[t.toLowerCase()]=function(e,n){var i=new f.Request(t,e);return this._setDefaults(i),n&&i.end(n),i}})),p.prototype.del=p.prototype.delete,f.get=function(t,e,n){var i=f("GET",t);return"function"==typeof e&&(n=e,e=null),e&&i.query(e),n&&i.end(n),i},f.head=function(t,e,n){var i=f("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&i.query(e),n&&i.end(n),i},f.options=function(t,e,n){var i=f("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},f.del=E,f.delete=E,f.patch=function(t,e,n){var i=f("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},f.post=function(t,e,n){var i=f("POST",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i},f.put=function(t,e,n){var i=f("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&i.send(e),n&&i.end(n),i}},73354:function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}t.exports=function(t){return null!==t&&"object"===e(t)}},2474:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r=n(73354);function o(t){if(t)return function(t){for(var e in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,e)&&(t[e]=o.prototype[e]);return t}(t)}t.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},o.prototype.parse=function(t){return this._parser=t,this},o.prototype.responseType=function(t){return this._responseType=t,this},o.prototype.serialize=function(t){return this._serializer=t,this},o.prototype.timeout=function(t){if(!t||"object"!==i(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},o.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var s=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),a=new Set([408,413,429,500,502,503,504,521,522,524]);o.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(e&&e.status&&a.has(e.status))return!0;if(t){if(t.code&&s.has(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},o.prototype.then=function(t,e){var n=this;if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(t,e){i.on("abort",(function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)e(n.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=n.status,t.method=n.method,t.url=n.url,e(t)}})),i.end((function(n,i){n?e(n):t(i)}))}))}return this._fullfilledPromise.then(t,e)},o.prototype.catch=function(t){return this.then(void 0,t)},o.prototype.use=function(t){return t(this),this},o.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},o.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},o.prototype.get=function(t){return this._header[t.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(t,e){if(r(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},o.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},o.prototype.field=function(t,e){if(null==t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(r(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.field(n,t[n]);return this}if(Array.isArray(e)){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&this.field(t,e[i]);return this}if(null==e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),this._getFormData().append(t,e),this},o.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},o.prototype._auth=function(t,e,n,i){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(i("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},o.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},o.prototype.redirects=function(t){return this._maxRedirects=t,this},o.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(t){var e=r(t),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&r(this._data))for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(this._data[i]=t[i]);else"string"==typeof t?(n||this.type("form"),(n=this._header["content-type"])&&(n=n.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===n?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||n||this.type("json"),this},o.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},o.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.slice(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,e)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.warn("Unsupported")},o.prototype._timeoutError=function(t,e,n){if(!this._aborted){var i=new Error("".concat(t+e,"ms exceeded"));i.timeout=e,i.code="ECONNABORTED",i.errno=n,this.timedout=!0,this.timedoutError=i,this.abort(),this.callback(i)}},o.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},99228:function(t,e,n){"use strict";var i=n(62433);function r(t){if(t)return function(t){for(var e in r.prototype)Object.prototype.hasOwnProperty.call(r.prototype,e)&&(t[e]=r.prototype[e]);return t}(t)}t.exports=r,r.prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=i.type(e);var n=i.params(e);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(this[r]=n[r]);this.links={};try{t.link&&(this.links=i.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},62433:function(t,e){"use strict";function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){var e,i={},r=n(t.split(/ *; */));try{for(r.s();!(e=r.n()).done;){var o=e.value.split(/ *= */),s=o.shift(),a=o.shift();s&&a&&(i[s]=a)}}catch(t){r.e(t)}finally{r.f()}return i},e.parseLinks=function(t){var e,i={},r=n(t.split(/ *, */));try{for(r.s();!(e=r.n()).done;){var o=e.value.split(/ *; */),s=o[0].slice(1,-1);i[o[1].split(/ *= */)[1].slice(1,-1)]=s}}catch(t){r.e(t)}finally{r.f()}return i},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},23580:function(t,e,n){"use strict";n.d(e,{Bq:function(){return h},ZB:function(){return Et},qA:function(){return nt},cJ:function(){return C},ZP:function(){return Ct}});n(92374),n(4256),n(17385),n(66479),n(90399),n(95696),n(91211),n(70309),n(99492),n(80978),n(11183),n(44936),n(69460),n(69867),n(45483),n(21531),n(87246);var i,r,o,s,a,u,l=n(139),c=n.n(l),p=n(82361),h=(n(44718),n(28088),n(60452),n(23395),n(60647),n(91560),n(31002),n(25731),n(78529),{SUCCESS:{CODE:0,MSG:""},AUTH_FAILED:{CODE:1,MSG:"authentication failed."},FILE_EMPTY:{CODE:2,MSG:"upload file is not set."},SIGNATURE_HOST_EMPTY:{CODE:3,MSG:"signature host is not set."},GET_SIGNATURE_FAIL:{CODE:4,MSG:"get signature failed."},GET_ENDPOINT_FAIL:{CODE:5,MSG:"get endpoint failed."},SCENE_ID_EMPTY:{CODE:6,MSG:"scene id is not set."},UPLOAD_HOST_EMPTY:{CODE:7,MSG:"upload host is not set."},DOMAIN_PREFIX_EMPTY:{CODE:8,MSG:"current scene requires custom domain prefix. call .setDomainPrefix() before init."},MEDIA_TYPE_UNKNOWN:{CODE:10,MSG:"content type is empty."},BIG_INIT_FAIL:{CODE:15,MSG:"multipart init request failed."},BIG_PART_FAIL:{CODE:16,MSG:"multipart upload request failed."},BIG_COMPLETE_FAIL:{CODE:17,MSG:"multipart complete request failed."},BIG_CHECK_SIZE_FAIL:{CODE:18,MSG:"check multipart upload size failed."},SCENE_UNKNOWN:{CODE:19,MSG:"scene is not set yet."},PRODUCT_UNKNOWN:{CODE:20,MSG:"isProduct is not set yet."},TAG_UNKNOWN:{CODE:21,MSG:"tag is empty."},TOKEN_UNKNOWN:{CODE:22,MSG:"token should not be empty at current scene."},IMAGE_PROCESS_CONFIG_ERROR:{CODE:23,MSG:"image process config error."},CLIENT_NOT_INIT:{CODE:24,MSG:"init function should be called before create request."},IMAGE_UPLOAD_FAILED:{CODE:25,MSG:"image upload failed."},IMAGE_PROCESS_NUMBER_EXCEED:{CODE:26,MSG:"the image processing rules exceed the maximum limit of 5."},FILE_UPLOAD_FAILED:{CODE:27,MSG:"file upload failed."},MIN_SIZE_OF_SPLIT_ERROR:{CODE:28,MSG:"the minimum size of split upload param is error."},CHUNK_SIZE_ERROR:{CODE:29,MSG:"chunk size should be 1 ~ 20MB and not larger than the minimum size of split upload."},URL_SIGN_UNKONW:{CODE:30,MSG:"unexpected url sign param."},SPLIT_FILE_FAILED:{CODE:31,MSG:"split file failed, make sure proper file is set."},RETRY_COUNT_ERROR:{CODE:32,MSG:"retry count should in range of [0, 2]."},CONCURRENCY_ERROR:{CODE:33,MSG:"concurrency number should in range of [1, 10]."},REQUEST_ABORTED:{CODE:34,MSG:"request aborted."}}),f=function(t,e,n){var i,r;void 0===e&&(e=null),void 0===n&&(n=h.SUCCESS);var o=(null==e?void 0:e.response)||e;t||null==e||(e=(null==e?void 0:e.body)||(null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.body)||e),(e instanceof Error||(null==e?void 0:e.stack)&&e.message)&&(e=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e))));var s={success:t,result:e,details:{status:null==o?void 0:o.status,headers:null==o?void 0:o.headers},errorCode:n.CODE,errorMsg:n.MSG};return 403===s.details.status&&40001===(null===(r=s.result)||void 0===r?void 0:r.error_code)&&(s.errorCode=h.AUTH_FAILED.CODE,s.errorMsg=h.AUTH_FAILED.MSG),s},d=function(t){if("object"!==(void 0===t?"undefined":(0,p._)(t))||null===t)return!1;var e=Object.keys(t);return!!(e.includes("success")&&e.includes("result")&&e.includes("errorCode")&&e.includes("errorMsg"))},g=function(t){return Buffer.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")},m=function(t){var e={url:t.url,imageInfo:{width:t.width,height:t.height,size:t.size}};return t.etag&&(e.imageInfo.etag=t.etag),t.processed_urls&&0!==t.processed_urls.length&&(e.processedUrls=t.processed_urls.map((function(t){return{url:t}}))),e},y=function(t){return t?1048576*t:0},v=function(t,e){if(!t||!t.size||"function"!=typeof t.slice)throw f(!1,null,h.SPLIT_FILE_FAILED);for(var n=t.size,i=0,r=i+e,o=[];i<n;){var s=t.slice(i,r);o.push(s),i=r,r=Math.min(i+e,n)}return o},_=function(){function t(t,e){this.max=t,this.fn=e,this.pool=[],this.requests=[],this.executedPool=[],this.fullfilled=!1,this.index=0,this.results=[]}return t.prototype.abort=function(){this.executedPool.forEach((function(t){return t.abort()})),this.fullfilled=!0,this.reject(f(!1,null,h.REQUEST_ABORTED))},t.prototype.start=function(t){var e=this;for(this.requests=t;this.pool.length<this.max;)this.setTask(this.requests.shift(),this.index++);return new Promise((function(t,n){e.reject=n,e.resolve=t,e.run(Promise.race(e.pool))}))},t.prototype.run=function(t){var e=this;this.fullfilled||t.then((function(){e.setTask(e.requests.shift(),e.index++),0===e.pool.length?(e.fullfilled=!0,e.resolve(e.results)):e.run(Promise.race(e.pool))}))},t.prototype.setTask=function(t,e){var n=this;if(t){this.executedPool.push(t);var i=this.fn(t,e);this.pool.push(i),i.then((function(t){n.results[e]=t,n.pool.splice(n.pool.indexOf(i),1)})).catch((function(t){n.fullfilled=!0,n.reject(t)}))}},t}(),b=function(t,e){var n,i=null,r=0,o=function(){r=+new Date,i=null,t.apply(null,n)};return function(){var s=+new Date,a=e-(s-r);n=arguments,a<=0||a>e?(i&&(clearTimeout(i),i=null),r=s,t.apply(null,n)):i||(i=setTimeout(o,a))}},E=(n(69632),"{{prefix}}"),C={GENERAL:10,PUBLIC_C:27,PUBLIC_C_US:1,PUBLIC_C_EU:25,PUBLIC_C_CA:2,C_END:26,C_END_GLOBAL:23,C_END_US:7,C_END_EU:24,C_END_CA:8,C_END_NZ:13,C_END_AU:14,C_END_UK:15,C_END_PREFIX:16},T=function(t){return(null==t?void 0:t.prefix)?{test:"".concat(t.prefix,".temudemo.com"),prod:"".concat(t.prefix,".temu.com")}:(null==t?void 0:t.dr)?{test:"www.temudemo.com",prod:"www.temu.com"}:{test:"",prod:""}},w=function(t){var e=t;return"udp"===t?e="us":["us","glo"].includes(t)&&(e="global"),{test:"".concat(e,".file.temudemo.com"),prod:"".concat(e,".file.temu.com")}},S=function(t){var e;if(null==t?void 0:t.prefix)return{test:"".concat(t.prefix,".file.temudemo.com"),prod:"".concat(t.prefix,".file.temu.com")};if(null==t?void 0:t.dr){var n=(null==t?void 0:t.regionId)?null===(e={12:{prefix:"au",dr:"glo"},29:{prefix:"br",dr:"glo"},31:{prefix:"sg",dr:"glo"},42:{prefix:"br",dr:"glo"},100:{prefix:"jp",dr:"glo"},119:{prefix:"sg",dr:"glo"},144:{prefix:"nz",dr:"glo"},159:{prefix:"br",dr:"glo"},160:{prefix:"jp",dr:"glo"},179:{prefix:"sg",dr:"glo"},185:{prefix:"jp",dr:"glo"},194:{prefix:"jp",dr:"glo"},197:{prefix:"sg",dr:"glo"},212:{prefix:"br",dr:"glo"},217:{prefix:"sg",dr:"glo"},126:{prefix:"za",dr:"eu"},184:{prefix:"za",dr:"eu"}}[t.regionId])||void 0===e?void 0:e.prefix:"";return n?{test:w(t.dr).test,prod:"".concat(n,".file.temu.com")}:w(t.dr)}return{test:"",prod:""}},x=S({prefix:"us"}),N=S({prefix:"eu"}),O=S({prefix:"ca"}),I=S({prefix:"nz"}),A=S({prefix:"au"}),D=S({prefix:"uk"}),P=S({prefix:"global"}),k={signatureHost:{test:"",prod:""},path:"/get_endpoint"},R={image:"/api/galerie/v3/store_image",file:"/api/galerie/general_file",multipart:{init:"/api/galerie/cos_large_file/upload_init",upload:"/api/galerie/cos_large_file/upload_part",complete:"/api/galerie/cos_large_file/upload_complete"},video:"/api/galerie/v1/store_video",videoMultipart:{init:"/api/galerie/large_file/v1/video/upload_init",upload:"/api/galerie/large_file/v1/video/upload_part",complete:"/api/galerie/large_file/v1/video/upload_complete"}},U={PUBLIC_C:{uploadHost:S(),uploadPath:R,signatureHost:T(),path:"/api/galerie/public/signature",dynamicUploadConfig:k,getSignatureHost:T,getUploadHost:S},PUBLIC_C_GLOBAL:{uploadHost:P,uploadPath:R,signatureHost:T({prefix:"global"}),path:"/api/galerie/public/signature",dynamicUploadConfig:k},PUBLIC_C_US:{uploadHost:x,uploadPath:R,signatureHost:T({prefix:"us"}),path:"/api/galerie/public/signature",dynamicUploadConfig:k},PUBLIC_C_EU:{uploadHost:N,uploadPath:R,signatureHost:T({prefix:"eu"}),path:"/api/galerie/public/signature",dynamicUploadConfig:k},PUBLIC_C_CA:{uploadHost:O,uploadPath:R,signatureHost:T({prefix:"ca"}),path:"/api/galerie/public/signature",dynamicUploadConfig:k},C_END:{uploadHost:S(),uploadPath:R,signatureHost:T(),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k,getSignatureHost:T,getUploadHost:S},C_END_GLOBAL:{uploadHost:P,uploadPath:R,signatureHost:T({prefix:"global"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_US:{uploadHost:x,uploadPath:R,signatureHost:T({prefix:"us"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_EU:{uploadHost:N,uploadPath:R,signatureHost:T({prefix:"eu"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_CA:{uploadHost:O,uploadPath:R,signatureHost:T({prefix:"ca"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_NZ:{uploadHost:I,uploadPath:R,signatureHost:T({prefix:"nz"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_AU:{uploadHost:A,uploadPath:R,signatureHost:T({prefix:"au"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_UK:{uploadHost:D,uploadPath:R,signatureHost:T({prefix:"uk"}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k},C_END_PREFIX:{uploadHost:S({prefix:E}),uploadPath:R,signatureHost:T({prefix:E}),path:"/api/galerie/file/signature",imagePath:"/api/galerie/image/signature",tokenName:"AccessToken",dynamicUploadConfig:k,usePrefix:!0},GENERAL:{uploadHost:S(),uploadPath:R,signatureHost:T(),path:"/general_auth/get_signature",dynamicUploadConfig:k}};!function(t){t[t.LimitMinAndCrop=1]="LimitMinAndCrop",t[t.LimitMaxWidthAndHeight=2]="LimitMaxWidthAndHeight",t[t.LimitMinWidthAndHeight=3]="LimitMinWidthAndHeight",t[t.LimitMinLongAndShortEdge=4]="LimitMinLongAndShortEdge",t[t.LimitMaxLongAndShortEdge=5]="LimitMaxLongAndShortEdge"}(i||(i={})),function(t){t.JPG="jpg",t.BMP="bmp",t.GIF="gif",t.PNG="png",t.WEBP="webp"}(r||(r={})),function(t){t[t.NONE=0]="NONE",t[t.PRIVATE_SIGN=1]="PRIVATE_SIGN",t[t.CDN_SIGN=2]="CDN_SIGN"}(o||(o={})),function(t){t.North="north",t.Northeast="northeast",t.West="west",t.Center="center",t.East="east",t.Southwest="southwest",t.South="south",t.Southeast="southeast"}(s||(s={})),function(t){t[t.Normal=0]="Normal",t[t.Multipart=1]="Multipart"}(a||(a={})),function(t){t.File="file",t.Image="image",t.Video="video"}(u||(u={}));var M=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},L=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},q=function(){function t(t){var e=t.client,n=t.agent;this.withImageOperation=!1,this.errorCollection=[],this.fileData=null,this.rules=[],this.originalNeed=!1,this.extraInfo=null,this.urlSignType=o.NONE,this.signature=void 0,this.useRemoteEndpoint=!1,this.uploadEndpoint="",this.endpointUid="",this.isAborted=!1,this.client=e,this.globalConfig=e.config,this.agent=n,this.request=null,this.uploadUrl=this.globalConfig.uploadUrl}return t.prototype.buildUploadRequest=function(){var t,e=this;this.request=this.agent.post(null===(t=this.uploadUrl)||void 0===t?void 0:t.image).field({url_width_height:!0}).attach("image",this.fileData),this.withImageOperation&&this.buildImageProcessParams(),this.extraInfo&&this.request.field({ext_info:JSON.stringify(this.extraInfo)}),this.filename&&this.request.field({filename:this.filename}),this.urlSignType!==o.NONE&&this.request.field({url_sign:this.urlSignType}),this.progressCallback&&this.request.on("progress",(function(t){"upload"===t.direction&&t.percent&&e.handleProgress(t.percent)}))},t.prototype.getSignature=function(){return M(this,void 0,void 0,(function(){var t,e,n;return L(this,(function(i){switch(i.label){case 0:if(this.signature)return[3,7];if("function"!=typeof this.customRequestSignature)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,this.customRequestSignature({uploadType:u.Image,tag:this.client.config.tag,file:this.fileData})];case 2:return t.signature=i.sent(),[3,4];case 3:throw e=i.sent(),f(!1,e,h.GET_SIGNATURE_FAIL);case 4:return[3,7];case 5:return n=this,[4,this.client.getSignature(u.Image,this.headers)];case 6:n.signature=i.sent(),i.label=7;case 7:return[2]}}))}))},t.prototype.build=function(){var t;return M(this,void 0,void 0,(function(){var e,n;return L(this,(function(i){switch(i.label){case 0:return this.fileData?[3,2]:[4,Promise.reject(f(!1,null,h.FILE_EMPTY))];case 1:case 3:case 5:case 10:return[2,i.sent()];case 2:return this.withImageOperation?0===this.errorCollection.length?[3,4]:[4,Promise.reject(f(!1,this.errorCollection.join(", "),h.IMAGE_PROCESS_CONFIG_ERROR))]:[3,6];case 4:return this.rules.length>5?[4,Promise.reject(f(!1,null,h.IMAGE_PROCESS_CONFIG_ERROR))]:[3,6];case 6:return i.trys.push([6,9,,11]),this.buildUploadRequest(),[4,this.getSignature()];case 7:if(i.sent(),this.isAborted)throw f(!1,null,h.REQUEST_ABORTED);return[4,this.request.field({upload_sign:this.signature})];case 8:if(e=i.sent(),null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.url)return[2,m(null==e?void 0:e.body)];throw f(!1,e,h.IMAGE_UPLOAD_FAILED);case 9:return n=i.sent(),[4,Promise.reject(d(n)?n:f(!1,n,n&&"ABORTED"===n.code?h.REQUEST_ABORTED:h.IMAGE_UPLOAD_FAILED))];case 11:return[2]}}))}))},t.prototype.handleProgress=function(t){var e;null===(e=this.progressCallback)||void 0===e||e.call(this,t)},t.prototype.buildImageProcessParams=function(){var t,e={original_needed:this.originalNeed,rules:this.rules};null===(t=this.request)||void 0===t||t.field({pic_operations:JSON.stringify(e)})},t.prototype.abort=function(){var t;this.isAborted=!0,null===(t=this.request)||void 0===t||t.abort()},t.prototype.setData=function(t){return this.fileData=t,this},t.prototype.saveOriginalImage=function(){return this.originalNeed=!0,this},t.prototype.setExtraInfo=function(t){return this.extraInfo=t,this},t.prototype.setFilename=function(t){return this.filename=t,this},t.prototype.setUrlSign=function(t){return this.urlSignType=t,this},t.prototype.setSignature=function(t){return"function"==typeof t?this.customRequestSignature=t:this.signature=t,this},t.prototype.setHeaders=function(t){return this.headers=t,this},t.prototype.setUseRemoteEndpoint=function(t){return this.useRemoteEndpoint=!0,t&&(this.endpointUid=t),this},t.prototype.addImageOperation=function(t){this.withImageOperation=!0;var e=t.getRule();return this.rules.push(e),this.errorCollection=this.errorCollection.concat(t.getErrorCollection()),this},t.prototype.onProgress=function(t){return this.progressCallback=t,this},t}(),H=q,z=(n(5127),n(55984),n(97380),n(41990),n(41224),n(90527),n(49834),n(58151),n(145),n(71697),n(9394),n(91636),n(24319),n(26848),n(29226),n(34706),n(84385),n(99941),n(3364),n(28609),n(16727),n(13438),n(37028),n(25320),n(53616),n(42423),n(21182),n(30896),n(6822),n(24139),n(51855),n(81991),n(85303),n(50737),n(48423),n(36867),n(77581),n(29166),n(65845),n(17125),n(65978),function(){function t(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}var e=t.prototype;return e.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},e.appendStr=function(e){var n,i,r=this._buffer8,o=this._buffer32,s=this._bufferLength;for(i=0;i<e.length;i+=1){if((n=e.charCodeAt(i))<128)r[s++]=n;else if(n<2048)r[s++]=192+(n>>>6),r[s++]=63&n|128;else if(n<55296||n>56319)r[s++]=224+(n>>>12),r[s++]=n>>>6&63|128,r[s++]=63&n|128;else{if((n=1024*(n-55296)+(e.charCodeAt(++i)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[s++]=240+(n>>>18),r[s++]=n>>>12&63|128,r[s++]=n>>>6&63|128,r[s++]=63&n|128}s>=64&&(this._dataLength+=64,t._md5cycle(this._state,o),s-=64,o[0]=o[16])}return this._bufferLength=s,this},e.appendAsciiStr=function(e){for(var n,i=this._buffer8,r=this._buffer32,o=this._bufferLength,s=0;;){for(n=Math.min(e.length-s,64-o);n--;)i[o++]=e.charCodeAt(s++);if(o<64)break;this._dataLength+=64,t._md5cycle(this._state,r),o=0}return this._bufferLength=o,this},e.appendByteArray=function(e){for(var n,i=this._buffer8,r=this._buffer32,o=this._bufferLength,s=0;;){for(n=Math.min(e.length-s,64-o);n--;)i[o++]=e[s++];if(o<64)break;this._dataLength+=64,t._md5cycle(this._state,r),o=0}return this._bufferLength=o,this},e.getState=function(){var t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.setState=function(t){var e,n=t.buffer,i=t.state,r=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],e=0;e<n.length;e+=1)this._buffer8[e]=n.charCodeAt(e)},e.end=function(e){void 0===e&&(e=!1);var n=this._bufferLength,i=this._buffer8,r=this._buffer32,o=1+(n>>2);this._dataLength+=n;var s=8*this._dataLength;if(i[n]=128,i[n+1]=i[n+2]=i[n+3]=0,r.set(t.buffer32Identity.subarray(o),o),n>55&&(t._md5cycle(this._state,r),r.set(t.buffer32Identity)),s<=4294967295)r[14]=s;else{var a=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var u=parseInt(a[2],16),l=parseInt(a[1],16)||0;r[14]=u,r[15]=l}return t._md5cycle(this._state,r),e?this._state:t._hex(this._state)},t.hashStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendStr(t).end(e)},t.hashAsciiStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendAsciiStr(t).end(e)},t._hex=function(e){var n,i,r,o,s=t.hexChars,a=t.hexOut;for(o=0;o<4;o+=1)for(i=8*o,n=e[o],r=0;r<8;r+=2)a[i+1+r]=s.charAt(15&n),n>>>=4,a[i+0+r]=s.charAt(15&n),n>>>=4;return a.join("")},t._md5cycle=function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&r)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&i)+e[2]+606105819|0)<<17|r>>>15)+o|0)&o|~r&n)+e[3]-1044525330|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&r)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&i)+e[6]-1473231341|0)<<17|r>>>15)+o|0)&o|~r&n)+e[7]-45705983|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&r)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&i)+e[10]-42063|0)<<17|r>>>15)+o|0)&o|~r&n)+e[11]-1990404162|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&r|~i&o)+e[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&r)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&i)+e[14]-1502002290|0)<<17|r>>>15)+o|0)&o|~r&n)+e[15]+1236535329|0)<<22|i>>>10)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[1]-165796510|0)<<5|n>>>27)+i|0)&r|i&~r)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&i|n&~i)+e[11]+643717713|0)<<14|r>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[5]-701558691|0)<<5|n>>>27)+i|0)&r|i&~r)+e[10]+38016083|0)<<9|o>>>23)+n|0)&i|n&~i)+e[15]-660478335|0)<<14|r>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[9]+568446438|0)<<5|n>>>27)+i|0)&r|i&~r)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&i|n&~i)+e[3]-187363961|0)<<14|r>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i&o|r&~o)+e[13]-1444681467|0)<<5|n>>>27)+i|0)&r|i&~r)+e[2]-51403784|0)<<9|o>>>23)+n|0)&i|n&~i)+e[7]+1735328473|0)<<14|r>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|i>>>12)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[5]-378558|0)<<4|n>>>28)+i|0)^i^r)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^i)+e[11]+1839030562|0)<<16|r>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[1]-1530992060|0)<<4|n>>>28)+i|0)^i^r)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^i)+e[7]-155497632|0)<<16|r>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[13]+681279174|0)<<4|n>>>28)+i|0)^i^r)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^i)+e[3]-722521979|0)<<16|r>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|i>>>9)+r|0,i=((i+=((r=((r+=((o=((o+=((n=((n+=(i^r^o)+e[9]-640364487|0)<<4|n>>>28)+i|0)^i^r)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^i)+e[15]+530742520|0)<<16|r>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|i>>>9)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[0]-198630844|0)<<6|n>>>26)+i|0)|~r))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[14]-1416354905|0)<<15|r>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[12]+1700485571|0)<<6|n>>>26)+i|0)|~r))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[10]-1051523|0)<<15|r>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[8]+1873313359|0)<<6|n>>>26)+i|0)|~r))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[6]-1560198380|0)<<15|r>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|i>>>11)+r|0,i=((i+=((o=((o+=(i^((n=((n+=(r^(i|~o))+e[4]-145523070|0)<<6|n>>>26)+i|0)|~r))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((r=((r+=(n^(o|~i))+e[2]+718787259|0)<<15|r>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|i>>>11)+r|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=r+t[2]|0,t[3]=o+t[3]|0},t}());if(z.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),z.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),z.hexChars="0123456789abcdef",z.hexOut=[],z.onePassHasher=new z,"5d41402abc4b2a76b9719d911017c592"!==z.hashStr("hello"))throw new Error("Md5 self test failed.");n(5150);var F,G=function(){return G=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},G.apply(this,arguments)},W=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},j=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},B=function(){function t(t){var e=t.client,n=t.agent;this.fileData=null,this.extraInfo=null,this.urlSignType=o.NONE,this.uploadType=a.Normal,this.partRequestPool=null,this.partCompleteRequest=null,this.metaHeaders=null,this.isAborted=!1,this.client=e,this.globalConfig=e.config,this.agent=n,this.request=null}return t.prototype.handleProgress=function(t){var e;null===(e=this.progressCallback)||void 0===e||e.call(this,t)},t.prototype.buildNormalRequest=function(){var t,e=this;this.request=this.agent.post(null===(t=this.globalConfig.uploadUrl)||void 0===t?void 0:t.file).attach("file",this.fileData),this.contentType&&this.request.field({content_type:this.contentType}),this.extraInfo&&this.request.field({ext_info:JSON.stringify(this.extraInfo)}),this.filename&&this.request.field({filename:this.filename}),this.contentDisposition&&this.request.field({content_disposition:this.contentDisposition}),this.urlSignType!==o.NONE&&this.request.field({url_sign:this.urlSignType}),this.progressCallback&&this.request.on("progress",(function(t){"upload"===t.direction&&t.percent&&e.handleProgress(t.percent)}))},t.prototype.buildInitRequest=function(){var t;if(!this.contentType)throw f(!1,null,h.MEDIA_TYPE_UNKNOWN);if(this.globalConfig.retryCount>2||this.globalConfig.retryCount<0)throw f(!1,null,h.RETRY_COUNT_ERROR);if(this.globalConfig.concurrency>10||this.globalConfig.concurrency<1)throw f(!1,null,h.CONCURRENCY_ERROR);this.request=this.agent.post(null===(t=this.globalConfig.uploadUrl)||void 0===t?void 0:t.multiInit),this.contentType&&this.request.send({content_type:this.contentType}),this.extraInfo&&this.request.send({ext_info:JSON.stringify(this.extraInfo)}),this.filename&&this.request.send({file_name:this.filename}),this.contentDisposition&&this.request.send({content_disposition:this.contentDisposition}),this.metaHeaders&&this.request.send({headers:JSON.stringify(this.metaHeaders)}),this.urlSignType!==o.NONE&&this.request.send({url_sign:this.urlSignType})},t.prototype.getSignature=function(){return W(this,void 0,void 0,(function(){var t,e,n;return j(this,(function(i){switch(i.label){case 0:if(this.signature)return[3,7];if("function"!=typeof this.customRequestSignature)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,this.customRequestSignature({uploadType:u.File,tag:this.client.config.tag,file:this.fileData})];case 2:return t.signature=i.sent(),[3,4];case 3:throw e=i.sent(),f(!1,e,h.GET_SIGNATURE_FAIL);case 4:return[3,7];case 5:return n=this,[4,this.client.getSignature(u.File,this.headers)];case 6:n.signature=i.sent(),i.label=7;case 7:return[2]}}))}))},t.prototype.normalUpload=function(){var t,e,n,i,r,o;return W(this,void 0,void 0,(function(){var s,a,u;return j(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,7]),this.buildNormalRequest(),[4,this.getSignature()];case 1:if(l.sent(),this.isAborted)throw f(!1,null,h.REQUEST_ABORTED);return this.globalConfig.md5Config.calcFile?[4,this.getFileMd5([this.fileData])]:[3,3];case 2:(s=l.sent())&&this.request.field({content_md5:s}),l.label=3;case 3:return[4,this.request.field({sign:this.signature})];case 4:if(a=l.sent(),null===(t=null==a?void 0:a.body)||void 0===t?void 0:t.url)return[2,(null===(e=null==a?void 0:a.body)||void 0===e?void 0:e.md5)?{url:null===(n=null==a?void 0:a.body)||void 0===n?void 0:n.url,etag:null===(i=null==a?void 0:a.body)||void 0===i?void 0:i.md5,size:null===(r=this.fileData)||void 0===r?void 0:r.size}:G(G({},null==a?void 0:a.body),{size:null===(o=this.fileData)||void 0===o?void 0:o.size})];throw f(!1,a,h.FILE_UPLOAD_FAILED);case 5:return u=l.sent(),[4,Promise.reject(d(u)?u:f(!1,u,u&&"ABORTED"===u.code?h.REQUEST_ABORTED:h.FILE_UPLOAD_FAILED))];case 6:return[2,l.sent()];case 7:return[2]}}))}))},t.prototype.build=function(){return W(this,void 0,void 0,(function(){return j(this,(function(t){switch(t.label){case 0:return this.fileData?[3,2]:[4,Promise.reject(f(!1,null,h.FILE_EMPTY))];case 1:case 3:case 5:return[2,t.sent()];case 2:return this.fileData.size>this.globalConfig.minSizeOfSplitUpload&&(this.uploadType=a.Multipart),this.uploadType!==a.Normal?[3,4]:[4,this.normalUpload()];case 4:return[4,this.multipartUpload()]}}))}))},t.prototype.multipartUpload=function(){var t;return W(this,void 0,void 0,(function(){var e,n,i,r,o,s;return j(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,6,7]),[4,this.doPartInitRequest()];case 1:return a.sent(),[4,this.doPartUploadRequest(this.signature)];case 2:if(e=a.sent(),n=e[0],i=e[1],r=n.reduce((function(t,e){var n;return null!==(n=t+e.partLength)&&void 0!==n?n:0}),0),r!==(null===(t=this.fileData)||void 0===t?void 0:t.size))throw f(!1,null,{CODE:h.BIG_CHECK_SIZE_FAIL.CODE,MSG:"".concat(h.BIG_CHECK_SIZE_FAIL.MSG," expect ").concat(this.fileData.size," and get ").concat(r,".")});return[4,this.doPartCompleteRequest(this.signature,i,r)];case 3:return(o=a.sent()).partDetails=n,o.size=r,i&&(o.etag=i),[2,o];case 4:return s=a.sent(),[4,Promise.reject(d(s)?s:f(!1,s,h.BIG_PART_FAIL))];case 5:return[2,a.sent()];case 6:return this.isAborted=!0,this.partRequestPool=null,[7];case 7:return[2]}}))}))},t.prototype.getFileMd5=function(t){return W(this,void 0,void 0,(function(){var e,n,i,r,o;return j(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),!(null==t?void 0:t[0]))return[2,""];e=new z,n=0,s.label=1;case 1:return n<t.length?this.isAborted?[2,""]:(r=(i=e).appendByteArray,o=Uint8Array.bind,[4,t[n].arrayBuffer()]):[3,4];case 2:r.apply(i,[new(o.apply(Uint8Array,[void 0,s.sent()]))]),s.label=3;case 3:return n++,[3,1];case 4:return[2,e.end()];case 5:return s.sent(),[2,""];case 6:return[2]}}))}))},t.prototype.doPartInitRequest=function(){var t;return W(this,void 0,void 0,(function(){var e;return j(this,(function(n){switch(n.label){case 0:return this.buildInitRequest(),[4,this.getSignature()];case 1:if(n.sent(),this.isAborted)throw f(!1,null,h.REQUEST_ABORTED);return[4,this.request.send({upload_sign:this.signature})];case 2:if(e=n.sent(),!(null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.success))throw f(!1,e,h.BIG_INIT_FAIL);return[2]}}))}))},t.prototype.doPartUploadRequest=function(t){var e,n;return W(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,c,p,d,g,m,y=this;return j(this,(function(E){switch(E.label){case 0:for(i=v(this.fileData,this.globalConfig.chunkSize),r=[],o=i.length,s=new Array(o).fill(0),a=null===(e=this.fileData)||void 0===e?void 0:e.size,u=function(e){var o=l.agent.post(null===(n=l.globalConfig.uploadUrl)||void 0===n?void 0:n.multiUpload).field({upload_sign:t}).field({total_part_num:1}).field({part_num1:e}).attach("part_file1",i[e-1]).retry(l.globalConfig.retryCount,(function(t,e){var n;return!((null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.uploaded_part_num_list)&&e.body.uploaded_part_num_list.length>0)}));l.progressCallback&&o.on("progress",(function(t){"upload"===t.direction&&t.loaded&&(s[e-1]=t.loaded,d())})),o.partLength=i[e-1].size,r.push(o)},l=this,c=1;c<=o;c++)u(c);return p=function(t,e){var n=t.reduce((function(t,e){return t+e}),0);return Math.min(n/e*100,100)},d=b((function(){y.handleProgress(p(s,a))}),300),g=function(t,e){return W(y,void 0,void 0,(function(){var n,r,o,s,a;return j(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),n="",this.globalConfig.md5Config.calcPart?[4,this.getFileMd5([i[e]])]:[3,2];case 1:(n=u.sent())&&t.field({content_md51:n}),u.label=2;case 2:return[4,t];case 3:if(r=u.sent(),(null===(a=null==r?void 0:r.body)||void 0===a?void 0:a.uploaded_part_num_list)&&r.body.uploaded_part_num_list.length>0)return o={body:r.body,partLength:t.partLength},this.globalConfig.md5Config.calcPart&&n&&(o.md5=n),[2,o];throw r;case 4:throw s=u.sent(),f(!1,s,h.BIG_PART_FAIL);case 5:return[2]}}))}))},m=Math.min(this.globalConfig.concurrency,r.length),this.partRequestPool=new _(m,g),[4,Promise.all([this.partRequestPool.start(r),this.globalConfig.md5Config.calcFile?this.getFileMd5(i):""])];case 1:return[2,E.sent()]}}))}))},t.prototype.doPartCompleteRequest=function(t,e,n){var i,r;return W(this,void 0,void 0,(function(){var o;return j(this,(function(s){switch(s.label){case 0:return this.partCompleteRequest=this.agent.post(null===(i=this.globalConfig.uploadUrl)||void 0===i?void 0:i.multiComplete).send({upload_sign:t}).send({large_file_size:n}),this.globalConfig.md5Config.calcFile&&e&&this.partCompleteRequest.send({content_md5:e}),[4,this.partCompleteRequest];case 1:if(o=s.sent(),null===(r=null==o?void 0:o.body)||void 0===r?void 0:r.download_url)return[2,{url:o.body.download_url}];throw f(!1,o,h.BIG_COMPLETE_FAIL)}}))}))},t.prototype.abort=function(){var t,e,n;this.isAborted=!0,null===(t=this.request)||void 0===t||t.abort(),null===(e=this.partRequestPool)||void 0===e||e.abort(),null===(n=this.partCompleteRequest)||void 0===n||n.abort()},t.prototype.setData=function(t){return this.fileData=t,this},t.prototype.setExtraInfo=function(t){return this.extraInfo=t,this},t.prototype.setContentType=function(t){return this.contentType=t,this},t.prototype.setFilename=function(t){return this.filename=t,this},t.prototype.setContentDisposition=function(t){return this.contentDisposition=t,this},t.prototype.setUrlSign=function(t){return this.urlSignType=t,this},t.prototype.setMetaHeaders=function(t){return this.metaHeaders=t,this},t.prototype.setSignature=function(t){return"function"==typeof t?this.customRequestSignature=t:this.signature=t,this},t.prototype.setHeaders=function(t){return this.headers=t,this},t.prototype.onProgress=function(t){return this.progressCallback=t,this},t}(),Q=B,Z=function(){return Z=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Z.apply(this,arguments)},X=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},J=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},K=function(){function t(t){var e=t.client,n=t.agent;this.fileData=null,this.extraInfo=null,this.urlSignType=o.NONE,this.uploadType=a.Normal,this.partRequestPool=null,this.partCompleteRequest=null,this.signature=void 0,this.createMedia=!1,this.useRemoteEndpoint=!1,this.uploadEndpoint="",this.endpointUid="",this.extraParams=void 0,this.isAborted=!1,this.client=e,this.globalConfig=e.config,this.agent=n,this.request=null,this.uploadUrl=this.globalConfig.uploadUrl}return t.prototype.handleProgress=function(t){var e;null===(e=this.progressCallback)||void 0===e||e.call(this,t)},t.prototype.buildNormalRequest=function(){var t,e=this;this.request=this.agent.post(null===(t=this.uploadUrl)||void 0===t?void 0:t.video).attach("file",this.fileData),this.extraInfo&&this.request.field({ext_info:JSON.stringify(this.extraInfo)}),this.extraParams&&this.request.field({extra_params:JSON.stringify(this.extraParams)}),this.createMedia&&this.request.field({create_media:!0}),this.contentDisposition&&this.request.field({content_disposition:this.contentDisposition}),this.urlSignType!==o.NONE&&this.request.field({url_sign:this.urlSignType}),this.progressCallback&&this.request.on("progress",(function(t){"upload"===t.direction&&t.percent&&e.handleProgress(t.percent)}))},t.prototype.buildInitRequest=function(){var t;if(!this.contentType)throw f(!1,null,h.MEDIA_TYPE_UNKNOWN);if(this.globalConfig.retryCount>2||this.globalConfig.retryCount<0)throw f(!1,null,h.RETRY_COUNT_ERROR);if(this.globalConfig.concurrency>10||this.globalConfig.concurrency<1)throw f(!1,null,h.CONCURRENCY_ERROR);this.request=this.agent.post(null===(t=this.uploadUrl)||void 0===t?void 0:t.videoMultiInit),this.contentType&&this.request.send({content_type:this.contentType}),this.extraInfo&&this.request.send({ext_info:JSON.stringify(this.extraInfo)}),this.extraParams&&this.request.send({extra_params:this.extraParams}),this.createMedia&&this.request.send({create_media:!0}),this.contentDisposition&&this.request.send({content_disposition:this.contentDisposition}),this.urlSignType!==o.NONE&&this.request.send({url_sign:this.urlSignType})},t.prototype.getSignature=function(){return X(this,void 0,void 0,(function(){var t,e,n;return J(this,(function(i){switch(i.label){case 0:if(this.signature)return[3,7];if("function"!=typeof this.customRequestSignature)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,this.customRequestSignature({uploadType:u.Video,tag:this.client.config.tag,file:this.fileData})];case 2:return t.signature=i.sent(),[3,4];case 3:throw e=i.sent(),f(!1,e,h.GET_SIGNATURE_FAIL);case 4:return[3,7];case 5:return n=this,[4,this.client.getSignature(u.Video,this.headers)];case 6:n.signature=i.sent(),i.label=7;case 7:return[2]}}))}))},t.prototype.normalUpload=function(){var t,e;return X(this,void 0,void 0,(function(){var n,i,r;return J(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,7]),this.buildNormalRequest(),[4,this.getSignature()];case 1:if(o.sent(),this.isAborted)throw f(!1,null,h.REQUEST_ABORTED);return this.globalConfig.md5Config.calcFile?[4,this.getFileMd5([this.fileData])]:[3,3];case 2:(n=o.sent())&&this.request.field({content_md5:n}),o.label=3;case 3:return[4,this.request.field({sign:this.signature})];case 4:if(i=o.sent(),null===(t=null==i?void 0:i.body)||void 0===t?void 0:t.url)return[2,Z(Z({},i.body),{size:null===(e=this.fileData)||void 0===e?void 0:e.size})];throw f(!1,i,h.FILE_UPLOAD_FAILED);case 5:return r=o.sent(),[4,Promise.reject(d(r)?r:f(!1,r,r&&"ABORTED"===r.code?h.REQUEST_ABORTED:h.FILE_UPLOAD_FAILED))];case 6:return[2,o.sent()];case 7:return[2]}}))}))},t.prototype.build=function(){return X(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return this.fileData?[3,2]:[4,Promise.reject(f(!1,null,h.FILE_EMPTY))];case 1:case 3:case 5:return[2,t.sent()];case 2:return this.fileData.size>this.globalConfig.minSizeOfSplitUpload&&(this.uploadType=a.Multipart),this.uploadType!==a.Normal?[3,4]:[4,this.normalUpload()];case 4:return[4,this.multipartUpload()]}}))}))},t.prototype.multipartUpload=function(){var t;return X(this,void 0,void 0,(function(){var e,n,i,r,o,s,a;return J(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,6,7]),[4,this.doPartInitRequest()];case 1:return e=u.sent(),[4,this.doPartUploadRequest(e)];case 2:if(n=u.sent(),i=n[0],r=n[1],o=i.reduce((function(t,e){var n;return null!==(n=t+e.partLength)&&void 0!==n?n:0}),0),o!==(null===(t=this.fileData)||void 0===t?void 0:t.size))throw f(!1,null,{CODE:h.BIG_CHECK_SIZE_FAIL.CODE,MSG:"".concat(h.BIG_CHECK_SIZE_FAIL.MSG," expect ").concat(this.fileData.size," and get ").concat(o,".")});return[4,this.doPartCompleteRequest(e,r,o)];case 3:return(s=u.sent()).partDetails=i,s.size=o,r&&(s.etag=r),[2,s];case 4:return a=u.sent(),[4,Promise.reject(d(a)?a:f(!1,a,h.BIG_PART_FAIL))];case 5:return[2,u.sent()];case 6:return this.isAborted=!0,this.partRequestPool=null,[7];case 7:return[2]}}))}))},t.prototype.getFileMd5=function(t){return X(this,void 0,void 0,(function(){var e,n,i,r,o;return J(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),!(null==t?void 0:t[0]))return[2,""];e=new z,n=0,s.label=1;case 1:return n<t.length?this.isAborted?[2,""]:(r=(i=e).appendByteArray,o=Uint8Array.bind,[4,t[n].arrayBuffer()]):[3,4];case 2:r.apply(i,[new(o.apply(Uint8Array,[void 0,s.sent()]))]),s.label=3;case 3:return n++,[3,1];case 4:return[2,e.end()];case 5:return s.sent(),[2,""];case 6:return[2]}}))}))},t.prototype.doPartInitRequest=function(){var t;return X(this,void 0,void 0,(function(){var e;return J(this,(function(n){switch(n.label){case 0:return this.buildInitRequest(),[4,this.getSignature()];case 1:if(n.sent(),this.isAborted)throw f(!1,null,h.REQUEST_ABORTED);return[4,this.request.send({sign:this.signature})];case 2:if(e=n.sent(),null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.sign)return[2,e.body.sign];throw f(!1,e,h.BIG_INIT_FAIL)}}))}))},t.prototype.doPartUploadRequest=function(t){var e,n;return X(this,void 0,void 0,(function(){var i,r,o,s,a,u,l,c,p,d,g,m,y=this;return J(this,(function(E){switch(E.label){case 0:for(i=v(this.fileData,this.globalConfig.chunkSize),r=[],o=i.length,s=new Array(o).fill(0),a=null===(e=this.fileData)||void 0===e?void 0:e.size,u=function(e){var o=l.agent.post(null===(n=l.uploadUrl)||void 0===n?void 0:n.videoMultiUpload).field({sign:t}).field({part_num:e}).attach("part_file",i[e-1]).retry(l.globalConfig.retryCount,(function(t,e){var n;return!((null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.uploaded_part_num)&&e.body.uploaded_part_num>0)}));l.extraParams&&o.field({extra_params:JSON.stringify(l.extraParams)}),l.progressCallback&&o.on("progress",(function(t){"upload"===t.direction&&t.loaded&&(s[e-1]=t.loaded,d())})),o.partLength=i[e-1].size,r.push(o)},l=this,c=1;c<=o;c++)u(c);return p=function(t,e){var n=t.reduce((function(t,e){return t+e}),0);return Math.min(n/e*100,100)},d=b((function(){y.handleProgress(p(s,a))}),300),g=function(t,e){return X(y,void 0,void 0,(function(){var n,r,o,s,a;return J(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),n="",this.globalConfig.md5Config.calcPart?[4,this.getFileMd5([i[e]])]:[3,2];case 1:(n=u.sent())&&t.field({content_md5:n}),u.label=2;case 2:return[4,t];case 3:if(r=u.sent(),(null===(a=null==r?void 0:r.body)||void 0===a?void 0:a.uploaded_part_num)&&r.body.uploaded_part_num>0)return o={body:r.body,partLength:t.partLength},this.globalConfig.md5Config.calcPart&&n&&(o.md5=n),[2,o];throw r;case 4:throw s=u.sent(),f(!1,s,h.BIG_PART_FAIL);case 5:return[2]}}))}))},m=Math.min(this.globalConfig.concurrency,r.length),this.partRequestPool=new _(m,g),[4,Promise.all([this.partRequestPool.start(r),this.globalConfig.md5Config.calcFile?this.getFileMd5(i):""])];case 1:return[2,E.sent()]}}))}))},t.prototype.doPartCompleteRequest=function(t,e,n){var i,r;return X(this,void 0,void 0,(function(){var o;return J(this,(function(s){switch(s.label){case 0:return this.partCompleteRequest=this.agent.post(null===(i=this.uploadUrl)||void 0===i?void 0:i.videoMultiComplete).send({sign:t}).send({large_file_size:n}),this.globalConfig.md5Config.calcFile&&e&&this.partCompleteRequest.send({content_md5:e}),this.extraParams&&this.partCompleteRequest.send({extra_params:this.extraParams}),[4,this.partCompleteRequest];case 1:if(o=s.sent(),null===(r=null==o?void 0:o.body)||void 0===r?void 0:r.url)return[2,null==o?void 0:o.body];throw f(!1,o,h.BIG_COMPLETE_FAIL)}}))}))},t.prototype.abort=function(){var t,e,n;this.isAborted=!0,null===(t=this.request)||void 0===t||t.abort(),null===(e=this.partRequestPool)||void 0===e||e.abort(),null===(n=this.partCompleteRequest)||void 0===n||n.abort()},t.prototype.setData=function(t){return this.fileData=t,this},t.prototype.setExtraInfo=function(t){return this.extraInfo=t,this},t.prototype.setExtraParams=function(t){return this.extraParams=t,this},t.prototype.setContentType=function(t){return this.contentType=t,this},t.prototype.setContentDisposition=function(t){return this.contentDisposition=t,this},t.prototype.setUrlSign=function(t){return this.urlSignType=t,this},t.prototype.setSignature=function(t){return"function"==typeof t?this.customRequestSignature=t:this.signature=t,this},t.prototype.setHeaders=function(t){return this.headers=t,this},t.prototype.setCreateMedia=function(t){return this.createMedia=t,this},t.prototype.setUseRemoteEndpoint=function(t){return this.useRemoteEndpoint=!0,t&&(this.endpointUid=t),this},t.prototype.onProgress=function(t){return this.progressCallback=t,this},t}(),Y=K,V=function(){return V=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},V.apply(this,arguments)},$=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},tt=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},et=function(){function t(){this.config={dr:void 0,regionId:void 0,scene:void 0,isProduct:void 0,retryCount:2,tag:"",token:"",timeout:{response:3e4,deadline:3e4},sceneConfig:void 0,envName:void 0,signatureUrl:void 0,endpointUrl:"",uploadUrl:void 0,uploadHost:"",signatureHost:"",headers:null,sceneID:"",minSizeOfSplitUpload:y(5),chunkSize:y(5),concurrency:2,versionInfo:"",withCredentials:!1,antiContent:"",md5Config:{calcFile:!0,calcPart:!1},domainPrefix:"",language:""},this.hasInit=!1,this.agent=c().agent(),this.agent.timeout(this.config.timeout),this.init=this.init.bind(this)}return t.prototype.init=function(){if(!this.config.tag)throw f(!1,null,h.TAG_UNKNOWN);if(this.config.versionInfo="?sdk_version=js-".concat("0.0.40","&tag_name=").concat(this.config.tag),this.config.sceneConfig=this.getSceneConfig(),this.config.envName=this.getEnvName(),this.config.tokenHeader=this.getTokenHeader(),this.config.signatureUrl=this.getSignatureUrl(),this.config.endpointUrl=this.getEndpointUrl(),this.config.uploadUrl=this.getUploadUrl(),"number"!=typeof this.config.minSizeOfSplitUpload||this.config.minSizeOfSplitUpload<0)throw f(!1,null,h.MIN_SIZE_OF_SPLIT_ERROR);if("number"!=typeof this.config.chunkSize||this.config.chunkSize<y(1)||this.config.chunkSize>=y(20)||this.config.chunkSize>this.config.minSizeOfSplitUpload)throw f(!1,null,h.CHUNK_SIZE_ERROR);return this.hasInit=!0,this},t.prototype.setDr=function(t){return this.config.dr=t,this},t.prototype.setRegionId=function(t){return this.config.regionId=t,this},t.prototype.setScene=function(t){return this.config.scene=t,this},t.prototype.isProduct=function(t){return this.config.isProduct=t,this},t.prototype.setMaxRetryCount=function(t){return this.config.retryCount=t,this},t.prototype.setAccessToken=function(t){return this.config.token=t,this},t.prototype.setUploadHost=function(t){return this.config.uploadHost=t,this},t.prototype.setSignatureHost=function(t){return this.config.signatureHost=t,this},t.prototype.setSceneID=function(t){return this.config.sceneID=t,this},t.prototype.setDomainPrefix=function(t){return this.config.domainPrefix=t,this},t.prototype.setHeaders=function(t){return this.config.headers=t,this},t.prototype.setMinSizeOfSplitUpload=function(t){return this.config.minSizeOfSplitUpload=y(t),this},t.prototype.setChunkSize=function(t){return this.config.chunkSize=y(t),this},t.prototype.setConcurrency=function(t){return this.config.concurrency=t,this},t.prototype.setAntiContent=function(t){return this.config.antiContent=t,this},t.prototype.setLanguage=function(t){return this.config.language=t,this},t.prototype.getEnvName=function(){if(void 0===this.config.isProduct)throw f(!1,null,h.PRODUCT_UNKNOWN);return this.config.isProduct?"prod":"test"},t.prototype.getSceneConfig=function(){var t=this;if(void 0===this.config.scene)throw f(!1,null,h.SCENE_UNKNOWN);var e=Object.keys(C).find((function(e){return C[e]===t.config.scene}));return U[e]},t.prototype.getTokenHeader=function(){var t,e=this.config.sceneConfig;if(e.tokenName&&(e.forceToken||this.config.token)){if(this.config.token)return(t={})[e.tokenName]=this.config.token,t;if(e.forceToken)throw f(!1,null,h.TOKEN_UNKNOWN)}},t.prototype.getUploadHost=function(t){var e,n=this.config.sceneConfig,i=this.config.envName,r=t||this.config.uploadHost||this.config.dr&&(null===(e=n.getUploadHost)||void 0===e?void 0:e.call(n,{regionId:this.config.regionId,dr:this.config.dr})[i])||n.uploadHost[i];if(!t&&!this.config.uploadHost&&n.usePrefix){if(""===this.config.domainPrefix)throw f(!1,null,h.DOMAIN_PREFIX_EMPTY);r=r.replace(E,this.config.domainPrefix)}return r},t.prototype.getSignatureUrl=function(){var t,e,n=this.config.sceneConfig,i=this.config.envName,r=this.config.signatureHost||this.config.dr&&(null===(t=n.getSignatureHost)||void 0===t?void 0:t.call(n,{dr:this.config.dr})[i])||n.signatureHost[i],o="".concat(this.config.versionInfo).concat(this.config.sceneID?"&scene_id=".concat(this.config.sceneID):"");if(!r)throw f(!1,null,h.SIGNATURE_HOST_EMPTY);if(!this.getUploadHost())throw f(!1,null,h.UPLOAD_HOST_EMPTY);if(this.config.scene===C.GENERAL&&!this.config.sceneID)throw f(!1,null,h.SCENE_ID_EMPTY);if(!this.config.signatureHost&&n.usePrefix){if(""===this.config.domainPrefix)throw f(!1,null,h.DOMAIN_PREFIX_EMPTY);r=r.replace(E,this.config.domainPrefix)}return{image:"https://".concat(r).concat(null!==(e=n.imagePath)&&void 0!==e?e:n.path).concat(o),file:"https://".concat(r).concat(n.path).concat(o),video:"https://".concat(r).concat(n.path).concat(o)}},t.prototype.getEndpointUrl=function(){var t=this.config.sceneConfig,e=this.config.envName,n=t.dynamicUploadConfig.signatureHost[e];return"https://".concat(n).concat(t.dynamicUploadConfig.path).concat(this.config.versionInfo)},t.prototype.getUploadUrl=function(t){var e=this.config.sceneConfig,n=this.getUploadHost(t);return{image:"https://".concat(n).concat(e.uploadPath.image).concat(this.config.versionInfo),file:"https://".concat(n).concat(e.uploadPath.file).concat(this.config.versionInfo),multiInit:"https://".concat(n).concat(e.uploadPath.multipart.init).concat(this.config.versionInfo),multiUpload:"https://".concat(n).concat(e.uploadPath.multipart.upload),multiComplete:"https://".concat(n).concat(e.uploadPath.multipart.complete),video:"https://".concat(n).concat(e.uploadPath.video).concat(this.config.versionInfo),videoMultiInit:"https://".concat(n).concat(e.uploadPath.videoMultipart.init).concat(this.config.versionInfo),videoMultiUpload:"https://".concat(n).concat(e.uploadPath.videoMultipart.upload),videoMultiComplete:"https://".concat(n).concat(e.uploadPath.videoMultipart.complete)}},t.prototype.getSignature=function(t,e){return $(this,void 0,void 0,(function(){var n;return tt(this,(function(i){switch(i.label){case 0:if(!this.config.tag)throw f(!1,null,h.TAG_UNKNOWN);return n=this.agent.post(this.config.signatureUrl[t]),this.config.tokenHeader&&n.set(this.config.tokenHeader),this.config.antiContent&&n.set({"anti-content":this.config.antiContent}),this.config.headers&&n.set(this.config.headers),e&&n.set(e),[4,n.send({bucket_tag:this.config.tag}).then((function(t){var e,n,i;if(null===(n=null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.result)||void 0===n?void 0:n.signature)return t.body.result.signature;if(null===(i=null==t?void 0:t.body)||void 0===i?void 0:i.signature)return t.body.signature;throw t})).catch((function(t){throw f(!1,t,h.GET_SIGNATURE_FAIL)}))];case 1:return[2,i.sent()]}}))}))},t.prototype.setTag=function(t){return this.config.tag=t,this},t.prototype.setTimeout=function(t){return this.config.timeout={response:t,deadline:t},this.agent.timeout(this.config.timeout),this},t.prototype.withCredentials=function(){return this.config.withCredentials=!0,this.agent.withCredentials(),this},t.prototype.setMd5Config=function(t){return this.config.md5Config="boolean"==typeof t?{calcFile:t,calcPart:t}:V(V({},this.config.md5Config),t),this},t.prototype.checkInitState=function(){if(!this.hasInit)throw f(!1,null,h.CLIENT_NOT_INIT)},t.prototype.uploadImage=function(){return this.checkInitState(),new H({client:this,agent:this.agent})},t.prototype.uploadFile=function(){return this.checkInitState(),new Q({client:this,agent:this.agent})},t.prototype.uploadVideo=function(){return this.checkInitState(),new Y({client:this,agent:this.agent})},t}(),nt=function(){return new it},it=function(){function t(){this.rules=[],this.suffix="",this.errorCollection=[]}return t.prototype.collectError=function(t){this.errorCollection=this.errorCollection.concat(t.getErrorCollection())},t.prototype.add=function(t){return this.rules.push(t.getRule()),this.collectError(t),this},t.prototype.getRule=function(){var t={rule:this.rules.join("|")};return this.suffix&&(t.suffix=this.suffix),t},t.prototype.getErrorCollection=function(){return this.errorCollection},t.prototype.setSuffix=function(t){return this.suffix=t,this},t}(),rt=(n(2525),n(76464),{notEmpty:function(t,e){if(!e||0===e.length)return"".concat(t," should not be empty")},notAllEmpty:function(t,e){var n=!1;if(e.forEach((function(t){return t&&(n=!0)})),!n)return"".concat(t," should not all be empty")},percent:function(t,e){if("number"!=typeof e||e<0||e>100)return"".concat(t," should be a number from 0 to 100")},positive:function(t,e){if("number"!=typeof e||e<=0)return"".concat(t," should be a positive number")},degree:function(t,e){if("number"!=typeof e||e<0||e>360)return"".concat(t," should be a number from 0 to 360")},numberFrom1To100:function(t,e){if("number"!=typeof e||e<1||e>100)return"".concat(t," should be a number from 1 to 100")},radius:function(t,e){if("number"!=typeof e||e<1||e>50)return"".concat(t," should be a number from 1 to 50")}}),ot=function(){function t(t){this.rules=[],this.callback=t}return t.prototype.add=function(t,e,n){var i=this;return n.forEach((function(n){i.rules.push((function(){return rt[n](t,e)}))})),this},t.prototype.check=function(){for(var t=[],e=0;e<this.rules.length;e++){var n=this.rules[e]();n&&t.push(n)}var i=t.join(", ");return i&&this.callback&&this.callback.call(null,i),i},t.prototype.single=function(t,e,n){return this.add(t,e,n).check()},t}(),st=function(t){return new ot(t)},at=(F=function(t,e){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},F(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}F(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ut=function(){function t(){}return t.prototype.thumbnailConfig=function(){return new ct},t.prototype.cutConfig=function(){return new pt},t.prototype.rotateConfig=function(){return new ht},t.prototype.formatConfig=function(){return new ft},t.prototype.qualityConfig=function(){return new dt},t.prototype.blurConfig=function(){return new gt},t.prototype.sharpenConfig=function(){return new mt},t.prototype.textWatermarkConfig=function(){return new yt},t.prototype.quickThumbnailTemplateConfig=function(){return new vt},t.prototype.tinyimgConfig=function(){return new _t},t.prototype.commonConfig=function(){return new bt},t}(),lt=function(){function t(){var t,e=this;this.errorCollection=[],this.validator=(t=function(t){return e.errorCollection.push(t)},function(){return st(t)}),this.pipe=[],this.prefix="imageMogr2"}return t.prototype.getErrorCollection=function(){return this.errorCollection},t.prototype.getRule=function(){return this.prefix?this.prefix+this.pipe.join(""):this.pipe.join("")},t}(),ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prefix="".concat(e.prefix,"/thumbnail"),e}return at(e,t),e.prototype.getRule=function(){return this.pipe.join("|")},e.prototype.percentage=function(t){return this.validator().single("ThumbnailConfig:percentage:percentage",t,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/!").concat(t,"p")),this},e.prototype.percentageKeepHeight=function(t){return this.validator().single("ThumbnailConfig:percentageKeepHeight:percentage",t,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/!").concat(t,"px")),this},e.prototype.percentageKeepWidth=function(t){return this.validator().single("ThumbnailConfig:percentageKeepWidth:percentage",t,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/!x").concat(t,"p")),this},e.prototype.setWidthProportionalZoom=function(t){return this.validator().single("ThumbnailConfig:setWidthProportionalZoom:width",t,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/").concat(t,"x")),this},e.prototype.setHeightProportionalZoom=function(t){return this.validator().single("ThumbnailConfig:setHeightProportionalZoom:height",t,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/x").concat(t)),this},e.prototype.limitMaxWidthAndHeight=function(t){var e=t.width,n=t.height;return this.validator().single("ThumbnailConfig:limitMaxWidthAndHeight:width",e,["notEmpty","positive"]),this.validator().single("ThumbnailConfig:limitMaxWidthAndHeight:height",n,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/").concat(e,"x").concat(n)),this},e.prototype.limitMinWidthAndHeight=function(t){var e=t.width,n=t.height;return this.validator().single("ThumbnailConfig:limitMinWidthAndHeight:width",e,["notEmpty","positive"]),this.validator().single("ThumbnailConfig:limitMinWidthAndHeight:height",n,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/!").concat(e,"x").concat(n,"r")),this},e.prototype.setWidthAndHeight=function(t){var e=t.width,n=t.height;return this.validator().single("ThumbnailConfig:setWidthAndHeight:width",e,["notEmpty","positive"]),this.validator().single("ThumbnailConfig:setWidthAndHeight:height",n,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/").concat(e,"x").concat(n,"!")),this},e.prototype.limitMaxArea=function(t){return this.validator().single("ThumbnailConfig:limitMaxArea:area",t,["notEmpty","positive"]),this.pipe.push("".concat(this._prefix,"/").concat(t,"@")),this},e}(lt),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.cut=function(t){var e=t.width,n=t.height,i=t.dx,r=void 0===i?0:i,o=t.dy,s=void 0===o?0:o;return this.validator().single("CutConfig:cut:width",e,["notEmpty","positive"]),this.validator().single("CutConfig:cut:height",n,["notEmpty","positive"]),this.pipe.push("/cut/".concat(e,"x").concat(n,"x").concat(r,"x").concat(s)),this},e.prototype.crop=function(t){var e=t.width,n=t.height,i=t.gravity;this.validator().single("CutConfig:crop:width&height",[e,n],["notAllEmpty"]);var r="";return r=n?e?"/crop/".concat(e,"x").concat(n):"/crop/x".concat(n):"/crop/".concat(e,"x"),i&&(r+="/gravity/".concat(i)),this.pipe.push(r),this},e.prototype.iradius=function(t){return this.validator().single("CutConfig:iradius:iradius",t,["notEmpty","positive"]),this.pipe.push("/iradius/".concat(t)),this},e.prototype.rradius=function(t){return this.validator().single("CutConfig:rradius:rradius",t,["notEmpty","positive"]),this.pipe.push("/rradius/".concat(t)),this},e.prototype.scrop=function(t){var e=t.width,n=t.height;return this.validator().single("CutConfig:scrop:width",e,["notEmpty","positive"]),this.validator().single("CutConfig:scrop:height",n,["notEmpty","positive"]),this.pipe.push("/scrop/".concat(e,"x").concat(n)),this},e}(lt),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.rotate=function(t){return this.validator().single("RotateConfig:rotate:degree",t,["notEmpty","degree"]),this.pipe.push("/rotate/".concat(t)),this},e.prototype.autoOrient=function(){return this.pipe.push("/auto-orient"),this},e}(lt),ft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=null,e.cgifValue=null,e.interlaceValue=null,e}return at(e,t),e.prototype.getRule=function(){return this.type&&"gif"!==this.type&&null!==this.cgifValue&&this.errorCollection.push("FormatConfig:cgif only supports gif"),this.type&&"jpg"!==this.type&&null!==this.interlaceValue&&this.errorCollection.push("FormatConfig:interlace only supports jpg"),this.prefix?this.prefix+this.pipe.join(""):this.pipe.join("")},e.prototype.format=function(t){return this.type=t,this.validator().single("FormatConfig:format:type",t,["notEmpty"]),this.pipe.push("/format/".concat(t)),this},e.prototype.cgif=function(t){return this.cgifValue=t,this.validator().single("FormatConfig:cgif",t,["notEmpty","numberFrom1To100"]),this.pipe.push("/cgif/".concat(t)),this},e.prototype.interlace=function(t){return this.interlaceValue=t,this.validator().single("FormatConfig:interlace",t,["notEmpty"]),this.pipe.push("/interlace/".concat(Number(t))),this},e}(lt),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.quality=function(t){if("number"==typeof t)this.validator().single("QualityConfig:quality",t,["notEmpty","percent"]),this.pipe.push("/quality/".concat(t));else{var e=t.quality,n=t.force,i=void 0!==n&&n;this.validator().single("QualityConfig:quality",e,["notEmpty","percent"]),this.pipe.push("/quality/".concat(e).concat(i?"!":""))}return this},e.prototype.rquality=function(t){return this.validator().single("QualityConfig:rquality",t,["notEmpty","percent"]),this.pipe.push("/rquality/".concat(t)),this},e.prototype.lquality=function(t){return this.validator().single("QualityConfig:lquality",t,["notEmpty","percent"]),this.pipe.push("/lquality/".concat(t)),this},e}(lt),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.blur=function(t){var e=t.radius,n=t.sigma;return this.validator().single("BlurConfig:radius",e,["notEmpty","radius"]),this.validator().single("BlurConfig:sigma",n,["notEmpty","positive"]),this.pipe.push("/blur/".concat(e,"x").concat(n)),this},e}(lt),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.sharpen=function(t){return this.validator().single("SharpenConfig:sharpen",t,["notEmpty"]),("number"!=typeof t||t<10||t>300)&&this.errorCollection.push("SharpenConfig:sharpen should be a number from 10 to 300"),this.pipe.push("/sharpen/".concat(t)),this},e}(lt),yt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefix="watermark/2",e}return at(e,t),e.prototype.text=function(t){return this.validator().single("TextWatermarkConfig:text",t,["notEmpty"]),this.pipe.push("/text/".concat(g(t))),this},e.prototype.font=function(t){return this.validator().single("TextWatermarkConfig:font",t,["notEmpty"]),this.pipe.push("/font/".concat(g(t))),this},e.prototype.fontsize=function(t){return this.validator().single("TextWatermarkConfig:fontsize",t,["notEmpty"]),this.pipe.push("/fontsize/".concat(t)),this},e.prototype.fill=function(t){return this.validator().single("TextWatermarkConfig:fill",t,["notEmpty"]),this.pipe.push("/fill/".concat(g(t))),this},e.prototype.dissolve=function(t){return this.validator().single("TextWatermarkConfig:dissolve",t,["notEmpty","numberFrom1To100"]),this.pipe.push("/dissolve/".concat(t)),this},e.prototype.gravity=function(t){return this.validator().single("TextWatermarkConfig:gravity",t,["notEmpty"]),this.pipe.push("/gravity/".concat(t)),this},e.prototype.dx=function(t){return this.validator().single("TextWatermarkConfig:dx",t,["notEmpty"]),this.pipe.push("/dx/".concat(t)),this},e.prototype.dy=function(t){return this.validator().single("TextWatermarkConfig:dy",t,["notEmpty"]),this.pipe.push("/dy/".concat(t)),this},e.prototype.batch=function(t){return this.validator().single("TextWatermarkConfig:batch",t,["notEmpty"]),t&&this.pipe.push("/batch/1"),this},e.prototype.degree=function(t){return this.validator().single("TextWatermarkConfig:degree",t,["notEmpty","degree"]),this.pipe.push("/degree/".concat(t)),this},e}(lt),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.getRule=function(){return this.pipe.join("|")},e.prototype.generateRule=function(t,e){var n=e.width,r=e.height,o=e.format,s=e.quality,a=e.force,u=e.relativeQuality,l=e.lowestQuality;this.validator().single("QuickThumbnailTemplateConfig:".concat(i[t],":width&height"),[n,r],["notAllEmpty"]),n&&this.validator().single("QuickThumbnailTemplate:".concat(i[t],":width"),n,["positive"]),r&&this.validator().single("QuickThumbnailTemplate:".concat(i[t],":height"),r,["positive"]),s&&this.validator().single("QuickThumbnailTemplate:".concat(i[t],":quality"),s,["percent"]),u&&this.validator().single("QuickThumbnailTemplate:".concat(i[t],":relativeQuality"),u,["percent"]),l&&this.validator().single("QuickThumbnailTemplate:".concat(i[t],":lowestQuality"),l,["percent"]);var c=["imageView2/".concat(t)];return n&&c.push("/w/".concat(n)),r&&c.push("/h/".concat(r)),o&&c.push("/format/".concat(o)),s&&c.push("/q/".concat(s).concat(a?"!":"")),u&&c.push("/rq/".concat(u)),l&&c.push("/lq/".concat(l)),c.join("")},e.prototype.limitMinAndCrop=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(i.LimitMinAndCrop,t)),this},e.prototype.limitMaxWidthAndHeight=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(i.LimitMaxWidthAndHeight,t)),this},e.prototype.limitMinWidthAndHeight=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(i.LimitMinWidthAndHeight,t)),this},e.prototype.limitMinLongAndShortEdge=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(i.LimitMinLongAndShortEdge,t)),this},e.prototype.limitMaxLongAndShortEdge=function(t){return void 0===t&&(t={}),this.pipe.push(this.generateRule(i.LimitMaxLongAndShortEdge,t)),this},e}(lt),_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefix="tinyimg",e}return at(e,t),e.prototype.singleCompression=function(t){return this.pipe.push("/mode/1/ignore-error/".concat(Number(t))),this},e}(lt),bt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefix="",e}return at(e,t),e.prototype.getRule=function(){return this.pipe.join("|")},e.prototype.sizeLimit=function(t){var e=t.maxSize,n=t.mustSmaller,i=t.ignoreError,r=void 0!==i&&i;return this.validator().single("CommonConfig:sizeLimit:maxSize",e,["notEmpty"]),this.pipe.push("imageMogr2/size-limit/".concat(e).concat(n?"!":"","/ignore-error/").concat(Number(r))),this},e.prototype.strip=function(){return this.pipe.push("imageMogr2/strip"),this},e.prototype.customCommand=function(t){return this.validator().single("CommonConfig:customCommand",t,["notEmpty"]),this.pipe.push(t),this},e}(lt),Et=function(){return new ut},Ct=et},19526:function(t,e,n){"use strict";var i=n(94761),r=n(96526),o=n(1070),s=n(87977),a=r.forwardRef((function(t,e){var n,a=(0,o.$)("bec-fe.svg-icons-pc"),u=a.t,l=a.i18n;return r.createElement(s.i,(0,i._)({ref:e,fill:"#000000"},t,{path:["M512 7.3c278.7 0 504.7 226 504.7 504.7 0 278.7-226 504.7-504.7 504.7-278.7 0-504.7-226-504.7-504.7 0-278.7 226-504.7 504.7-504.7z m0 73.2c-238.3 0-431.5 193.2-431.5 431.5 0 238.3 193.2 431.5 431.5 431.5 238.3 0 431.5-193.2 431.5-431.5 0-238.3-193.2-431.5-431.5-431.5z m-73.1 676.1c-20.2 0-36.6-16.4-36.6-36.5 0-20.2 16.4-36.6 36.6-36.6l43.6-0.1 0-196.8-14.3 0c-18 0-32.9-12.9-36-30l-0.6-6.5c0-20.2 16.4-36.6 36.6-36.6l50.9 0c20.2 0 36.6 16.4 36.6 36.6l0 233.3 29.4 0.1c20.2 0 36.6 16.4 36.6 36.6 0 20.2-16.4 36.6-36.6 36.5l-146.2 0z m63.8-500.6c30.3 0 54.9 24.6 54.9 54.9 0 30.3-24.6 54.9-54.9 54.8-30.3 0-54.9-24.6-54.9-54.8 0-30.3 24.6-54.9 54.9-54.9z"],"aria-label":null!=(n=t["aria-label"])?n:l.exists("aria-label.TishiJieshi",{ns:"bec-fe.svg-icons-pc"})?u("aria-label.TishiJieshi"):void 0,rtlPath:[]}))}));a.supportRtl=!1,e.Z=a},62426:function(t,e,n){"use strict";n.d(e,{t:function(){return o}});var i=n(8226),r=(n(69460),n(96526));function o(t){var e=(0,r.useRef)(t);e.current=t;var n=(0,r.useCallback)((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o;return null==e.current?void 0:(o=e.current).call.apply(o,[e].concat((0,i._)(n)))}),[]);return n}},93189:function(t,e,n){"use strict";var i=n(94761),r=(n(65978),n(31002),n(91560),n(96526)),o=n(72779),s=n.n(o),a=n(86687),u=n(33823),l=n(60269),c=n(784),p=n(32507),h=n(49e3),f=n(53803),d=n(70563),g=n(61789),m=n(69462),y=n(69594),v=n(79039),_=n(30515),b=n(28333),E=n(25898),C=n(18430),T=n(12439),w=n.n(T);var S=function(t){var e,n,i,o=t||{},s=o.data,a=o.isShowTag,u=s||{},c=u.skuPicBottomText,p=u.skuPicBottomInfo;if(!a)return null;if(null==p||null==(e=p.displayItems)?void 0:e.length){var h=p.displayItems,f=p.textFormat||{},d=f.bgColor,g=f.transparency,m=void 0===g?100:g;return r.createElement("div",{className:w().goodsTag},r.createElement(l.V,{type:"gray",size:"lg",maxWidth:79,style:{backgroundColor:(n=d,i=.01*m,n&&"rgba("+parseInt("0x"+n.slice(1,3),16)+", "+parseInt("0x"+n.slice(3,5),16)+", "+parseInt("0x"+n.slice(5,7),16)+", "+i+")")}},r.createElement(E.dH,{richTexts:h,ignoreFontSize:!0})))}return(null==c?void 0:c.length)?r.createElement("div",{className:w().goodsTag},r.createElement(l.V,{type:"gray",size:"lg",maxWidth:79},r.createElement(E.dH,{richTexts:c,ignoreFontSize:!0}))):null},x=function(t){var e=t.data,n=t.log,i=t.ui,o=t.interaction,a=t.page_el_sn,u=i.buttonText,l=i.buttonStyle,d=i.skuDetail,g=o||{},m=g.ifHideToastWhenScroll,y=g.limitScrollHide,v=void 0===y?1500:y,E=d||{},T=E.skuList,x=1===l,N=4===l,O=1===E.style,I=O?3:4;(0,r.useEffect)((function(){if(m){var t=!1,e=setTimeout((function(){t=!0}),v),n=function(){return t&&(null==c.Z.cancel?void 0:c.Z.cancel.call(c.Z))};return window.addEventListener("scroll",n),function(){window.removeEventListener("scroll",n),clearTimeout(e)}}return function(){}}),[]);return r.createElement(p.fS,{page_el_sn:a,useClick:!1,others:n},r.createElement("div",null,(e||[]).map((function(t,e){var n=t||{},i=n.richContents,o=n.uiStyle;if(!(null==i?void 0:i.length))return null;var a=e?w().checkoutIcon:w().succIcon,u=e?"":w().succText,l=(0,C.OM)(i);return r.createElement("div",{"aria-live":0===e?"assertive":"",role:0===e?"alert":"",className:s()(w().row,1==+o&&w().point),key:l+"-"+(e+1)},r.createElement(b.NS,{displayItems:i,imageClassName:a,textClassName:u,isSeparateDay:!0}))})),(null==T?void 0:T.length)?r.createElement("div",{className:s()(w().goodsList,O&&w().threeImages)},T.map((function(t,e){var n=t||{},i=n.skuThumbUrl,o=n.skuId;if(e>=I||!i)return null;var s=e===I-1&&T.length>I;return r.createElement("div",{key:o||e,className:w().goodsItem},r.createElement(_.Ci,{src:i,alt:""}),s?r.createElement("div",{className:w().goodsItemMask},"+"+(T.length-I+1)):r.createElement(S,{isShowTag:O,data:t}))}))):null,!!u&&r.createElement("div",{className:s()(w().btnRow,x&&w().primary)},r.createElement(h.Z,{type:x?f.SC.primary:f.SC.ghost,className:s()(w().btn,N&&w().btn32px),innerCls:w().btnInner},r.createElement("div",{className:w().btnText},u)))))};e.Z=function(t,e){if(null==t?void 0:t.length){var n=e||{},o=n.ifToastLocateCenter,l=n.control,p=n.checkoutInfo,h=n.skuDetail,f=n.logPayload,_=n.page_el_sn,b=void 0===_?222442:_,E=l||{},C=E.jumpUrl,T=E.jumpType,S=E.buttonText,N=E.retainTime,O=E.buttonStyle,I=E.buttonType,A=E.benefitType,D="number"==typeof N&&N>0?N:1500,P=(0,i._)({bnft_txt:null!=A?A:void 0,button_type:I||0},f),k=4===T||C||S,R=k?s()(w().cursor,S&&w().toastWrapWithBtn):"",U={buttonText:S,jumpUrl:C,buttonStyle:O,skuDetail:h},M={timeout:D,className:R,click:function(){k&&(o&&(null==c.Z.cancel||c.Z.cancel.call(c.Z)),(0,a.ax)((0,i._)({page_el_sn:b},P)),(0,g.ZP)({scene:6,event:"add_succ_toast_click",errorCode:T,extra:{jumpUrl:C,jumpType:T,buttonText:S}}),4===T?(0,m.hs)(p,{withLoading:!0}):C?u.ZP.uniformForward((0,y.av)(C)):S&&u.ZP.uniformForward((0,y.av)((0,v.N)())))}},L={ifHideToastWhenScroll:D>=4e3,limitScrollHide:1500};o?c.Z.customize(r.createElement(x,{data:t,page_el_sn:b,log:P,ui:U,interaction:L}),M):d.Z.customize(r.createElement(x,{data:t,log:P,ui:U}),M)}}},61789:function(t,e,n){"use strict";n.d(e,{ZP:function(){return p},Fu:function(){return h},ZV:function(){return f}});var i=n(94761),r=n(12330),o=(n(44718),n(64198)),s=n(20306),a=n(97796),u=n(30555),l="0.1.105",c=90730;function p(t){try{var e=t||{},n=e.event,p=e.referPageSn,h=void 0===p?"0":p,f=e.extra,d=e.scene,g=e.eventType,m=void 0===g?-1:g,y=e.errorCode,v=void 0===y?-1:y,_=e.errorMsg,b=void 0===_?"":_,E=e.indexValue,C=void 0===E?[]:E,T=e.secondarySnapshotId,w=e.tags,S=e.fields,x=e.longFields,N=(0,r._)(e,["event","referPageSn","extra","scene","eventType","errorCode","errorMsg","indexValue","secondarySnapshotId","tags","fields","longFields"]),O=+((0,o.ej)()||{}).isLogin?1:0;if("string"!=typeof n)return;(0,u.Z)(n,(0,i._)({},N,{groupId:c,tags:(0,i._)({scene:d,errorCode:String(v),isLogin:O,referPageSn:+h-1e4<100?h:"10000000",platform:(0,a.Xf)()},w||{}),fields:(0,i._)({extraData:JSON.stringify(f||{}),eventType:String(m),errorMsg:b,secondarySnapshotId:T,bizVersion:l,referPageSn:h},S||{}),longFields:(0,i._)({indexValue:C},x||{})}))}catch(t){(0,u.Z)("sc_biz_logger_error",{fields:{extraData:JSON.stringify({error:t.message,stack:t.stack})}}),(0,s.K2)(t)}}var h=p,f=function(t){"function"==typeof t&&(h=t)}},83725:function(t,e,n){"use strict";n.d(e,{Qo:function(){return l},ZP:function(){return u},Z_:function(){return c}});var i=n(94761),r=(n(69867),n(17385),n(57411)),o=n(86687),s=n(77330),a=n(18517);function u(t){return t.operate_type===a.l.ADD?(0,o.oP)({op:"event",sub_op:"add_to_cart",cart_scene:t.client_cart_scene,type:2,add_amount:t.num,goods_id:t.goods_id,sku_id:t.sku_id,cart_data_type:t.cart_data_type}):t.operate_type===a.l.UPDATE?(0,o.oP)({op:"event",sub_op:"add_to_cart",cart_scene:t.client_cart_scene,type:3,before_amount:t.from_num,after_amount:t.num,before_sku_id:t.sku_id,after_sku_id:t.sku_id,goods_id:t.goods_id,before_style:1,cart_data_type:t.cart_data_type}):t.operate_type===a.l.DELETE&&(0,o.oP)({op:"event",sub_op:"add_to_cart",cart_scene:t.client_cart_scene,type:5,before_amount:t.from_num,goods_id:t.goods_id,sku_id:t.sku_id,cart_data_type:t.cart_data_type}),function(t){return(0,s._)({url:"/api/bg/bg-uranus-api/uranus_cart/single/operate_cart",params:t,config:{useAntiToken:!0}})}((0,i._)({},t,{operate_extend_map:(0,i._)({upgrade_available:"1",checkout_local_warehouse:"1"},(null==t?void 0:t.operate_extend_map)||{})}))}function l(t){return(0,s._)({url:"/api/bg/bg-uranus-api/uranus_cart/remove_and_add",params:t,config:{useAntiToken:!0}})}function c(t){var e=t||{},n=e.secondarySnapshotId,o=e.reqParams;return(0,s._)({url:"/api/bg/bg-uranus-api/uranus_cart/secondary",params:(0,i._)({secondary_snapshot_id:n},o),format:function(t){var e=(0,r.zW)(t,["action_type_data_map"]),n=((null==e?void 0:e.result)||{}).actionTypeDataMap;return Object.keys(n||{}).forEach((function(t){n[t]=(0,r.zW)(n[t],[])})),e}}).catch((function(t){return{error:t}}))}},18517:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});var i=function(t){return t[t.ADD=1]="ADD",t[t.UPDATE=2]="UPDATE",t[t.DELETE=3]="DELETE",t[t.UPDATE_CUSTOM=5]="UPDATE_CUSTOM",t}({})},69462:function(t,e,n){"use strict";n.d(e,{ge:function(){return y},hs:function(){return b}});var i=n(81862),r=n(94761),o=n(50853),s=(n(44718),n(91560),n(69867),n(13445)),a=n(34161),u=n(20739),l=n(33823),c=n(70563),p=n(48885),h=n(61789),f=n(71077),d=n(83276),g=n(69594),m=n(77330),y=function(t){var e=this,n=this;this.scene=6,this.sendBizLogger=function(t){(0,h.ZP)((0,r._)({scene:e.scene,eventType:9},t))},this.maxMergePaySkuMaxLength=1e3,this.createCompressKey=(0,i._)((function(t,e){var i,r,a,u,l,c,p,h;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,s.J)((0,f.W)())];case 1:return i=o.sent(),[4,(0,m._)({url:i?"/api/bg-morgan/confirm/cart/compress":"/api/bg-morgan/confirm/cart/visitor/compress",params:{compress_value:t,url_length:e}})];case 2:return r=o.sent(),u=(a=r||{}).isApiError,l=a.isAxiosError,c=a.errorMsg,p=a.axiosErrorMsg,h=u||l||!!c||!!p,n.sendBizLogger({event:"checkout_compress_key",errorMsg:p||c||"",errorCode:h?10001:0,extra:{result:r,isLogin:i}}),[2,r]}}))})),this.createCheckoutUrl=(0,i._)((function(t,e){var i,s,l,p,h,f,m,y,v,_,b,E,C,T,w,S,x;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return s=(i=t||{}).goodsList,l=void 0===s?[]:s,p=i.destinationUrl,h=void 0===p?"/bgt_order_checkout.html?":p,f=i.checkoutExtendMap,m=void 0===f?{}:f,y=(e||{}).otherQuery,v=!1,_=JSON.stringify((null==l?void 0:l.map((function(t){var e=t||{},n=e.goodsId,i=e.skuId,r=e.goodsNumber,o=e.extendMap,s=void 0===o?{}:o;return n&&i&&r||(v=!0),{goods_id:n,sku_id:i,goods_number:r,extend_map:(0,d.At)(s)}})))||[]),b=(0,r._)({extend_map:Object.keys(m||{}).length?JSON.stringify((0,d.At)(m)):void 0,goods_list:_},y),n.sendBizLogger({event:"checkout_start",errorCode:v?10001:0,extra:{urlParams:b}}),(E=(0,a.ru)(b,h)).length>n.maxMergePaySkuMaxLength?[4,n.createCompressKey(_,E.length)]:[3,2];case 1:if(C=o.sent(),T=C.compressKey,w=C.degradeLength,S=void 0===w?3e3:w,x=C.intercept,!S||x&&E.length>=S||!x&&E.length>=S&&!T)return c.Z.warning(u.ZP.t("ShoppingCart.Warning.FailedCheckout",{ns:"bec-fe.web-ui"})),n.sendBizLogger({event:"checkout_break",errorCode:"compress_key_fail",extra:{url:E,length:E.length,degradeLength:S,intercept:x,compress_key:T}}),[2,""];!x&&T&&(E=(0,a.ru)({goods_list:null,compress_key:T},E)),o.label=2;case 2:return E=(0,g.av)(E),n.sendBizLogger({event:"checkout_end",errorCode:E?0:10001,extra:{checkout_url:E}}),[2,E]}}))})),this.scene=(null==t?void 0:t.scene)||this.scene},v=(new y).createCheckoutUrl,_=function(t){t&&l.ZP.uniformForward(t)},b=(0,i._)((function(t,e){var n,i,r,s,a,u,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return i=(n=e||{}).handleJump,r=void 0===i?_:i,s=n.withLoading,a=void 0!==s&&s,u=n.otherQuery,(0,h.ZP)({event:"sc_quick_checkout",scene:6,extra:{params:t,otherQuery:u}}),a&&p.M.show(),[4,v(t,{otherQuery:u})];case 1:return l=o.sent(),a&&p.M.hide(),r(l),[2]}}))}))},83276:function(t,e,n){"use strict";n.d(e,{At:function(){return a},X6:function(){return p},fZ:function(){return l},or:function(){return c}});var i=n(82361);n(80978),n(11183),n(69867),n(17385),n(44936),n(21531),n(87246),n(44718);function r(t){if("function"!=typeof t)throw new Error("Expected a function");var e={};return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=i[0];if(!e[o]){var s=Object.keys(e);s.length>200&&delete e[s[0]],e[o]=t.apply(this,i)}return e[o]}}function o(t,e,n){if(Array.isArray(e))n=n||[],e.forEach((function(e,r){"object"===(void 0===e?"undefined":(0,i._)(e))&&null!==e?n.push(o(t,e)):null!==e&&n.push(e)}));else for(var r in n=n||{},e)Object.prototype.hasOwnProperty.call(e,r)&&("object"===(0,i._)(e[r])&&null!==e[r]?n[t(r)]=o(t,e[r],Array.isArray(e[r])?[]:{}):null!==e[r]&&(n[t(r)]=e[r]));return n}var s=r((function(t){return t.replace(/([A-Z])/g,(function(t,e){return"_"+e.toLowerCase()}))}));function a(t,e){return o(s,t,e)}var u=r((function(t){return t.replace(/_(\w)/g,(function(t,e){return e.toUpperCase()}))}));function l(t,e){return o(u,t,e)}function c(t){return"string"==typeof t?t:JSON.stringify(t||{})}var p=function(t){return Array.isArray(t)?t.length?JSON.stringify(t):void 0:"object"===(void 0===t?"undefined":(0,i._)(t))?t?JSON.stringify(t):void 0:t}},69594:function(t,e,n){"use strict";n.d(e,{av:function(){return i},mx:function(){return r}});n(69867),n(1205),n(21531),n(87246),n(97751),n(17385),n(60452),n(23395);function i(t){return void 0===t&&(t=""),t.startsWith("/")?t:"/"+t}var r=function(t,e){return void 0===t&&(t=""),t&&e&&e.scene?t+(t.includes("?")?"&":"?")+"scene="+e.scene:t}},77330:function(t,e,n){"use strict";n.d(e,{_:function(){return s}});var i=n(38636),r=n(71077),o=n(83276),s=function(t){var e=t.url,n=t.format,s=void 0===n?o.fZ:n,a=t.params,u=t.config,l=t.errorHandler;return(0,i._z)({axiosHttp:(0,r.W)(),url:e,params:a,format:s,config:u,errorHandler:l})}},79039:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var i=n(94761),r=n(34161),o=function(t){var e=(t||{}).queriesObj,n=(0,i._)({},e);return(0,r.ru)(n,"/shopping_cart.html")}},60687:function(t,e,n){"use strict";n.d(e,{RJ:function(){return T},ZP:function(){return w}});var i,r=n(94761),o=n(82361),s=(n(93801),n(17385),n(10867),n(80978),n(11183),n(96526)),a=n(20306),u=n(1369),l=n(61789),c=n(81862),p=n(50853),h=(n(44936),n(44215),n(91211),n(70309),n(99492),n(22979),n(44718),n(69867),n(17206),n(91560),n(42307)),f=n(56236),d=(n(18360),(0,f.zT)()),g=new Map,m=new Map,y=function(t){if(g.has(t)){var e=g.get(t),n=e.reporter;!e.repeat&&_(t),n()}},v=(0,c._)((function(t){var e,n;return(0,p.__generator)(this,(function(o){switch(o.label){case 0:return[4,(i||(i=(0,c._)((function(){var t;return(0,p.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),(t=d.isNativePlatform)?[4,(0,h.X6)().then((function(t){return 1==+t.shown_type})).catch((function(){return!1}))]:[3,2];case 1:t=e.sent(),e.label=2;case 2:return t?[4,(0,h.Rl)()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))()),i)];case 1:return o.sent(),e=JSON.stringify(Object.keys((0,r._)({},t,{root:void 0})).sort().map((function(e){return[e,t[e]]}))),m.has(e)?[2,m.get(e)]:(a=(s=t).ratio,u=void 0===a?.75:a,l=s.rootMargin,f=void 0===l?"0px":l,v=s.root,_=new Set,b=null,n=new IntersectionObserver((function(t){t.forEach((function(t){var e=t.target;if(g.has(e)){var n=g.get(e),i=n.enterTime,r=n.duration,o=n.repeat;if(t.isIntersecting&&t.intersectionRatio>=u){if(!r)return void y(e);n.enterTime=t.time,_.add(e),b&&clearTimeout(b),b=setTimeout((function(){_.forEach((function(t){return y(t)})),_.clear(),b=null}),r)}else!o&&i&&t.time-i>=r&&y(e),_.delete(e),delete n.enterTime}}))}),{threshold:u,rootMargin:f,root:v}),m.set(e,n),[2,n])}var s,a,u,l,f,v,_,b}))})),_=(0,c._)((function(t){var e,n,i,r;return(0,p.__generator)(this,(function(o){switch(o.label){case 0:return g.has(t)?(e=g.get(t),n=e.ratio,i=e.rootMargin,r=e.root,g.delete(t),[4,v({ratio:n,rootMargin:i,root:r})]):[2];case 1:return o.sent().unobserve(t),[2]}}))})),b=(0,c._)((function(t,e){var n,i,r,o,s,a,u,l,c,h;return(0,p.__generator)(this,(function(p){switch(p.label){case 0:return i=(n=e||{}).reporter,r=n.duration,o=void 0===r?300:r,s=n.ratio,a=void 0===s?.75:s,u=n.rootMargin,l=void 0===u?"0px":u,c=n.repeat,h=n.root,!t||g.has(t)?[2]:(g.set(t,{reporter:i,duration:o,ratio:a,rootMargin:l,repeat:c,root:h}),[4,v({ratio:a,rootMargin:l,root:h})]);case 1:return p.sent().observe(t),[2]}}))})),E=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.filter((function(t){return t}));return i.length<=1?i[0]:function(t){i.forEach((function(e){!function(t,e){"function"==typeof t?t(e):"object"===(void 0===t?"undefined":(0,o._)(t))&&t&&"current"in t&&(t.current=e)}(e,t)}))}},C=(0,s.memo)((function(t){var e=t.children,n=t.event,i=t.sendBizLogger,o=void 0===i?l.Fu:i,c=t.extra,p=t.others,h=t.repeat,f=t.reporter,d=t.ratio,g=t.rootMargin,m=t.duration,y=(0,s.useRef)(null),v=(0,u.t)((function(){if("function"==typeof f)return f();o((0,r._)({eventType:2,errorMsg:"BizImpr",extra:c,event:n},p))}));(0,s.useEffect)((function(){var t=y.current;if(n){if(function(t){return t instanceof Element}(t))return b(t,{reporter:v,repeat:h,ratio:d,duration:m,rootMargin:g}),function(){_(t)}}else(0,a.K2)(new Error("ShoppingCart BizImpr no event!!"))}),[]);var C=(0,s.useMemo)((function(){return E(y,null==e?void 0:e.ref)}),[y,null==e?void 0:e.ref]);return(0,s.isValidElement)(e)?(0,s.cloneElement)(e,{ref:C}):e})),T=function(t){var e,n;return s.createElement(C,(0,r._)({},t,{event:null!=(n=t.event)?n:null==(e=t.strategy)?void 0:e.event}))},w=T},30515:function(t,e,n){"use strict";n.d(e,{Ci:function(){return l}});var i=n(94761),r=n(12330),o=(n(17385),n(96526)),s=n(53078),a=n(34283),u=n(61789),l=(0,s.$P)({name:"WSC_CartEmage"})((0,o.memo)((function(t){var e=t.cartSkuImage,n=t.style,s=t.src,l=(0,r._)(t,["cartSkuImage","style","src"]),c=e||{},p=c.cutTopPercent,h=c.cutBottomPercent,f=c.cutLeftPercent,d=c.cutRightPercent,g=c.thumbUrl,m=(0,o.useMemo)((function(){if([p,h,f,d].some((function(t){return"number"!=typeof t||isNaN(t)})))return{scale:null,style:{}};var t=1/(1-(f+d)/1e4);return{scale:t,style:t>=1?{transformOrigin:"0% 0%",transform:"scale("+t+") translate(-"+f/1e4*100+"%, -"+p/1e4*100+"%)"}:{}}}),[p,h,f,d]),y=m.scale,v=m.style;(0,o.useEffect)((function(){"number"==typeof y&&y<1&&(0,u.Fu)({event:"sku_image_scale_error",extra:e})}),[]);var _=(0,o.useMemo)((function(){return(0,i._)({},v,n)}),[v,n]),b=g||s;return o.createElement(a.ZP,(0,i._)({kind:1,alt:""},l,{src:b,style:_}))})))},28333:function(t,e,n){"use strict";n.d(e,{NS:function(){return g},Ul:function(){return m}});var i=n(94761),r=n(89290),o=(n(76464),n(91560),n(60452),n(23395),n(96526)),s=n(72779),a=n.n(s),u=n(34283),l=n(99063),c=n(1369);function p(t){var e=t.displayItem,n=t.imageStyle,r=void 0===n?{}:n,s=t.className,a=t.resizeWidth,l="function"==typeof r?r:function(){return r},c=e||{},p=c.height,h=c.width,f=c.url,d=(0,i._)({height:p,width:h},l(e));return f?o.createElement(u.ZP,{alt:"",src:f,style:d,"aria-hidden":!0,className:s,resizeWidth:a}):null}function h(t){var e=t.displayItem,n=t.textStyle,r=void 0===n?{}:n,s=t.className,a=void 0===s?"":s,u=t.ignoreFontSize,l="function"==typeof r?r:function(){return r},c=(0,i._)({},e,null==e?void 0:e.textFormat),p=c.fontWeight,h=c.fontColor,f=c.color,d=c.fontSize,g=c.bold,m=c.text,y=void 0===m?"":m,v=c.strike,_=g?600:400,b=(0,i._)({fontWeight:p||_,color:h||f,fontSize:u?void 0:d,textDecoration:v?"line-through":void 0},l(e));return o.createElement("span",{style:b,className:a},y)}function f(t){var e=t.displayItem,n=t.onCountDown,r=t.serverTime,s=t.className,a=(0,i._)({},e,null==e?void 0:e.textFormat),u=a.fontWeight,c=a.fontColor,p=a.color,h=a.fontSize,f=a.bold,d=a.text,g=void 0===d?"":d,m={fontWeight:f?600:u,color:c||p,fontSize:h},y=function(t){var e=t.hour,n=t.minute,i=t.second,r=t.day;return o.createElement("span",{style:m,className:s,"data-countdown":!0,dir:"ltr"},+r?o.createElement(o.Fragment,null,o.createElement("span",{"data-type":"time"},+r),o.createElement("span",{"data-type":"colon"},":")):null,+e?o.createElement(o.Fragment,null,o.createElement("span",{"data-type":"time"},+e),o.createElement("span",{"data-type":"colon"},":")):null,+n?o.createElement(o.Fragment,null,o.createElement("span",{"data-type":"time"},+n),o.createElement("span",{"data-type":"colon"},":")):null,o.createElement("span",{"data-type":"time"},+i))},v=(0,o.useMemo)((function(){return 1e3*(Math.ceil(Date.now()/1e3)+Number(g)||0)}),[]);return o.createElement(l.ZP,{endTime:v,interval:1e3,onEnd:n,serverTime:r},y)}function d(t){var e=t.displayItem,n=t.onCountDown,r=t.onCountDownDayHide,s=t.isSeparateDay,a=t.serverTime,u=t.className,p=t.ignoreFontSize,h=(0,i._)({},e,null==e?void 0:e.textFormat),f=h.fontWeight,d=h.fontColor,g=h.color,m=h.fontSize,y=h.bold,v=h.text,_=void 0===v?"":v,b={fontWeight:y?600:f,color:d||g,fontSize:p?void 0:m},E=(0,o.useRef)(),C=(0,c.t)((function(t){var e=t.day,n="00"===e?"":e;s&&E.current&&!n&&(null==r||r()),E.current=n})),T=function(t){var e=t.hour,n=t.hours,i=t.minute,r=t.second,a=t.day,l="00"===a?"":a;return o.createElement("span",{style:b,className:u,"data-countdown":!0,dir:"ltr","data-countdown-day":!(!s||!l)||void 0},s&&l?o.createElement(o.Fragment,null,o.createElement("span",{"data-type":"time"},l),o.createElement("span",{"data-type":"colon"},":")):null,o.createElement("span",{"data-type":"time"},s?e:n),o.createElement("span",{"data-type":"colon"},":"),o.createElement("span",{"data-type":"time"},i),o.createElement("span",{"data-type":"colon"},":"),o.createElement("span",{"data-type":"time"},r))};return o.createElement(l.ZP,{endTime:1e3*Number(_)||Date.now(),interval:1e3,onEnd:n,onUpdate:C,serverTime:a},T)}function g(t){var e=t.displayItems,n=t.imageStyle,i=t.imageClassName,s=t.isSeparateDay,a=t.onCountDown,u=t.onCountDownAfterHide,l=t.onCountDownDayHide,c=t.serverTime,g=t.textStyle,m=t.textClassName,y=t.textPreProcessedHandler,v=t.ignoreFontSize,_=t.ignoreCountDownFontSize,b=t.countdownClassName,E=(0,r._)((0,o.useState)(!0),2),C=E[0],T=E[1],w=a||function(){T(!1),null==u||u()};return e&&C?o.createElement(o.Fragment,null,e.map((function(t,e){var r=t||{},a=r.displayType,u=(r.textFormat||{}).countDownTimeStamp;if(100===a)return o.createElement(p,{displayItem:t,key:a+"-"+((null==t?void 0:t.url)||"")+"-"+(e+1),imageStyle:n,className:i});if(300===a||u)return 350===a?o.createElement(f,{displayItem:t,isSeparateDay:s,onCountDown:w,key:(a||0)+"-"+((null==t?void 0:t.text)||"")+"-"+(e+1),serverTime:c,className:b}):o.createElement(d,{displayItem:t,isSeparateDay:s,onCountDown:w,key:(a||0)+"-"+((null==t?void 0:t.text)||"")+"-"+(e+1),serverTime:c,className:b,ignoreFontSize:_,onCountDownDayHide:l});var E=null==y?void 0:y(t,e);return E||o.createElement(h,{displayItem:t,key:(a||0)+"-"+((null==t?void 0:t.text)||"")+"-"+(e+1),textStyle:g,className:m,ignoreFontSize:v})}))):null}function m(t){var e=t.displayItems,n=t.onCountDown,r=t.serverTime,s=t.isSeparateDay,u=t.textStyle,l=t.textClassName,c=t.ignoreFontSize,f=t.imageClassName,g=t.roundImageClassName,m=t.imgResizeWidth,y=t.imageStyle;return e?o.createElement(o.Fragment,null,e.map((function(t,e){var v=t||{},_=v.textFormat,b=v.displayType,E=(_||{}).countDownTimeStamp;return[150,100].includes(b)?o.createElement(p,{displayItem:t,key:(b||0)+"-"+((null==t?void 0:t.url)||"")+"-"+(e+1),imageStyle:y,className:a()(f,150===b&&g),resizeWidth:m}):E?o.createElement(d,{displayItem:(0,i._)({},_,t),isSeparateDay:s,onCountDown:n,key:(b||0)+"-"+((null==t?void 0:t.text)||"")+"-"+(e+1),serverTime:r}):o.createElement(h,{displayItem:(0,i._)({},_,t),key:(b||0)+"-"+((null==t?void 0:t.text)||"")+"-"+(e+1),textStyle:u,className:l,ignoreFontSize:c})}))):null}},35411:function(t,e,n){"use strict";n.d(e,{Q:function(){return i}});var i=function(t){return t[t.TEXT=0]="TEXT",t[t.BORDER=1]="BORDER",t[t.BORDERED_WITH_BG_COLOR=3]="BORDERED_WITH_BG_COLOR",t[t.IMAGE=100]="IMAGE",t[t.ROUND_IMAGE=150]="ROUND_IMAGE",t[t.COUNT_DOWN=300]="COUNT_DOWN",t[t.COUNT_DOWN_ABS=350]="COUNT_DOWN_ABS",t[t.COUNT_DOWN_MS=360]="COUNT_DOWN_MS",t[t.COUNT_DOWN_DESC=370]="COUNT_DOWN_DESC",t[t.ANIMATED_TEXT=400]="ANIMATED_TEXT",t[t.PROGRESS=500]="PROGRESS",t}({})},25898:function(t,e,n){"use strict";n.d(e,{dH:function(){return L}});var i,r,o=n(87612),s=n(94761),a=n(12330),u=n(89290),l=(n(69632),n(87246),n(76464),n(91560),n(96526)),c=n(72779),p=n.n(c),h=n(98537),f=n.n(h),d=n(1070),g=n(13090),m=n(60501),y=n(33823),v=n(89769),_=n(34283),b=n(1369),E=n(99063),C=n(61789),T=n(35411),w=n(18430),S=n(48188),x=n.n(S),N=function(t){var e=t.className,n=t.style,i=t.onClick,r=t.onMouseDown,o=t.children;return l.createElement(g.a,{onClick:i,onMouseDown:r,style:n,className:e,as:"span"},o)},O=function(t){var e=t.item,n=t.className,i=t.style,r=t.resizeWidth,o=t.isAction,a=e.url;if(!a)return null;var u=l.createElement(_.ZP,{alt:"","aria-hidden":!0,"data-icon":!0,src:a,style:i,resizeWidth:r});return o?l.createElement(N,(0,s._)({},t,{className:p()(n,x().roundImgWrap)}),u):l.createElement("span",{style:i,className:p()(n,x().roundImgWrap)},u)},I=function(t){var e=t.item,n=t.className,i=t.style,r=t.resizeWidth,o=t.isRoundImg,a=t.isAction,u=e.url;if(!u)return null;if(a&&o)return l.createElement(O,t);var c=function(t){return l.createElement(_.ZP,{alt:"","aria-hidden":!0,"data-icon":!0,src:u,style:i,resizeWidth:r,className:t})};return a?l.createElement(N,(0,s._)({},t,{className:p()(n,x().inlineFlex)}),c()):c(p()(o&&x().roundImg,n))},A=function(t){var e=t.item,n=t.className,i=t.style,r=t.isAction,o=e.text,s=void 0===o?"":o,a=e.hyperLinkUrl,u=(0,l.useCallback)((function(t){if(/^(?:[a-zA-Z]+:)?\/\//.test(t))return(0,C.ZP)({event:"link_other_https",scene:0,errorMsg:t}),void(0,m.a)({url:t,target:"_blank"});y.ZP.uniformForward(t)}),[]);return s?a?l.createElement(v.rU,{url:a,onClick:u,style:i,className:n},s):r?l.createElement(N,t,s):l.createElement("span",{style:i,className:n},s):null},D=function(t){var e=t.item,n=t.className,i=t.style,r=e.borderColor,o=e.bgColor,a=e.fontSize;if(!r&&!o)return l.createElement(A,t);var u=(0,s._)({background:o,borderColor:r||o,lineHeight:a?a+4+"px":void 0},i),c=p()(x().bgBorder,n);return l.createElement(A,(0,s._)({},t,{item:e,className:c,style:u}))},P=function(t){var e=t.item,n=t.isAbs,i=t.className,r=t.style,o=t.serverTime,s=t.onCountDown,a=t.onCountDownDayHide,c=t.isSeparateDay,p=t.isShowMs,h=t.isCountDownDesc,f=e.text,g=void 0===f?"":f,m=(0,d.$)("web-shopping-cart.global",{keyPrefix:"RichTextCountDown"}).t,y=(0,l.useRef)(0),v=(0,u._)((0,l.useState)(p),1)[0],_=(0,u._)((0,l.useState)(null==c||c),1)[0],C=v?100:1e3,T=(0,b.t)((function(t){var e=t.day;_&&(y.current&&!+e&&(null==a||a()),y.current=+e)})),w=(0,l.useMemo)((function(){return n?1e3*(Math.ceil(Date.now()/1e3)+Number(g)||0):1e3*Number(g)||Date.now()}),[]);if((0,l.useEffect)((function(){}),[]),!g)return null;var S=function(t){var e=t.day,n=t.hour,o=t.hours,s=t.minute,a=t.second,u=t.millisecond,c=t.leftTs;if(h)return l.createElement("span",{style:r,className:i,"data-countdown-desc":!0},function(t){var e=t.hours,n=t.minute,i=t.leftTs,r=function(t,e){return m(t,{0:e,interpolation:{prefix:"{",suffix:"}"}})};return i>36e5?r("LastXHours",+e+1):i>354e4?r("LastXHour",1):i>6e4?r("LastXMinutes",Math.min(59,+n+1)):r("LastXMinute",i>0?1:0)}({leftTs:c,hours:o,minute:s}));var p=!(!_||!+e);return l.createElement("span",{style:r,className:i,"data-countdown":!0,"data-countdown-day":!!p||void 0,"data-countdown-ms":!!v||void 0,dir:"ltr","aria-hidden":!0},p?l.createElement(l.Fragment,null,l.createElement("span",{"data-type":"time"},e),l.createElement("span",{"data-type":"colon"},":")):null,l.createElement("span",{"data-type":"time"},p?n:o),l.createElement("span",{"data-type":"colon"},":"),l.createElement("span",{"data-type":"time"},s),l.createElement("span",{"data-type":"colon"},":"),l.createElement("span",{"data-type":"time"},a),v?l.createElement(l.Fragment,null,l.createElement("span",{"data-type":"colon"},"."),l.createElement("span",{"data-type":"time-ms"},Math.floor(+(u||0)/100))):null)};return l.createElement(E.ZP,{endTime:w,interval:C,onEnd:s,onUpdate:T,serverTime:o},S)},k=(i={},(0,o._)(i,T.Q.TEXT,A),(0,o._)(i,T.Q.IMAGE,I),(0,o._)(i,T.Q.ROUND_IMAGE,I),(0,o._)(i,T.Q.COUNT_DOWN,P),(0,o._)(i,T.Q.COUNT_DOWN_ABS,P),(0,o._)(i,T.Q.COUNT_DOWN_MS,P),(0,o._)(i,T.Q.COUNT_DOWN_DESC,P),i),R=(r={},(0,o._)(r,T.Q.BORDER,D),(0,o._)(r,T.Q.BORDERED_WITH_BG_COLOR,D),r),U=(0,o._)({},T.Q.ROUND_IMAGE,O),M=function(t,e,n){var i=e||{},r=i.uiGenerate,o=i.ignoreFontSize,a=(0,s._)({},t,null==t?void 0:t.textFormat),u=null==r?void 0:r(a,n),l=a.displayType,c=a.width,h=a.height,f=a.fontWeight,d=a.fontColor,g=a.color,m=a.fontSize,y=a.bold,v=a.italic,_=u||{},b=_.style,E=_.className,C=function(t){var e=t.strike,n=t.strikethroughColor,i=t.strikethroughWeight;return e?{style:{"--decoColor":n,"--decoThickness":i?i+"px":void 0},className:p()(x().strike,2===e?x().underline:x().lineThrough)}:{}}(a),w=C.style,S=C.className,N=function(t){var e=t||{},n=e.vAlignMiddle,i=e.vAlignOffset;return n?i?{top:"-"+i+"px",className:x().vAlignOffset}:{className:x().vAlignMiddle}:{}}(e),O=N.top,I=N.className,A=function(t,e){var n=t.actionType,i=(e||{}).handleActionMap,r=(null==i?void 0:i[n])||{},o=r.onClick,s=r.onMouseDown;return n&&"function"==typeof o?{isAction:!0,className:x().canClick,onClick:o,onMouseDown:s}:{}}(a,e),D=A.isAction,P=A.className,k=A.onClick,R=A.onMouseDown,U=(0,s._)({width:c,height:h,fontWeight:f||(y?500:400),color:d||g,fontSize:o?void 0:m,fontStyle:v?"italic":void 0,top:O},b,w),M=l===T.Q.COUNT_DOWN_ABS||void 0,L=l===T.Q.COUNT_DOWN_MS||void 0,q=l===T.Q.COUNT_DOWN_DESC||void 0,H=l===T.Q.ROUND_IMAGE||void 0;return(0,s._)({},e,u,{className:p()(E,S,I,P),style:U,composedItem:a,isAbs:M,isShowMs:L,isCountDownDesc:q,isRoundImg:H,isAction:D,onClick:k,onMouseDown:R})},L=function(t){var e=t||{},n=e.richTexts,i=e.uiCompConfig,r=e.uiAttrConfig,o=e.as,u=e.pAttr,c=e.bgBorderBack,h=e.enableEllipsisColor,d=e.completeRoundImg,g=(0,l.useMemo)((function(){return(0,s._)({},k,c?R:{},d?U:{},i)}),[c,d,i]),m=(0,l.useMemo)((function(){return(0,s._)({},r)}),[r]);if(!(null==n?void 0:n.length))return null;var y=l.createElement(l.Fragment,null,n.map((function(e,n){var i=M(e,t,n),r=i.node,o=i.composedItem,u=(0,a._)(i,["node","composedItem"]),c=o||{},h=c.displayType,f=c.countDownTimeStamp,d=c.url,y=c.text,v=(h||0)+"-"+(d||y||"")+"-"+(n+1),_=!h&&f?T.Q.COUNT_DOWN:h,b=g[_||T.Q.TEXT]||A,E=m[_||T.Q.TEXT]||{};return r?l.createElement(l.Fragment,{key:v},r):l.createElement(b,(0,s._)({item:o,key:v},u,E,{className:p()(null==u?void 0:u.className,null==E?void 0:E.className)}))})));if(o){var v,_=u;if(h&&!(null==u||null==(v=u.style)?void 0:v.color)){var b={color:(0,w.aq)(n)};_=f()(u,{style:b})}return l.createElement(o,_,y)}return y}},18430:function(t,e,n){"use strict";n.d(e,{Gl:function(){return s},OM:function(){return o},aq:function(){return a}});var i=n(8226),r=(n(91560),n(60452),n(23395),n(4555),n(45483),n(17385),n(35411)),o=function(t){return(t||[]).map((function(t){return(null==t?void 0:t.text)||""})).join("")},s=function(t){return(t||[]).map((function(t){var e=t||{},n=e.displayType,i=e.text;return![r.Q.IMAGE,r.Q.ROUND_IMAGE,r.Q.COUNT_DOWN,r.Q.COUNT_DOWN_ABS,r.Q.COUNT_DOWN_MS,r.Q.COUNT_DOWN_DESC,r.Q.PROGRESS].includes(n||0)&&i?i:""})).join("")},a=function(t,e){var n;if(void 0===e&&(e=!1),Array.isArray(t)&&(null==t?void 0:t.length)){var r=(0,i._)(t);!e&&r.reverse();var o=r.find((function(t){var e;return(null==t||null==(e=t.textFormat)?void 0:e.color)||(null==t?void 0:t.fontColor)||(null==t?void 0:t.color)}));return(null==o||null==(n=o.textFormat)?void 0:n.color)||(null==o?void 0:o.fontColor)||(null==o?void 0:o.color)}}},23220:function(t,e,n){"use strict";n.d(e,{o:function(){return p}});var i=n(96526),r=n(72779),o=n.n(r),s=n(1070),a=n(79118),u=n(53803),l=n(58374),c=n.n(l),p=(0,i.memo)((function(t){var e=t.title,n=t.desc,r=t.btnText,l=t.btnClass,p=t.btnDisable,h=t.onClick,f=t.iconClass,d=t.wrapClass,g=(0,s.$)("bec-fe.web-ui",{keyPrefix:"DefaultErrorView"}).t;return i.createElement("div",{className:o()(c().wrap,d)},i.createElement("div",{className:o()(c().circle,f)},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 1024 1024",strokeWidth:"0"},i.createElement("g",null,i.createElement("path",{d:"M875.1 359.5l7.3 4.5c8.8 5.5 17.4 11.2 25.9 17.1l8.5 6 7 4.9-9.9 13.9-7-4.9c-8.3-5.9-16.6-11.5-25.1-17.1l-8.5-5.4-7.3-4.6 9.1-14.4z m-727-1l9.5 14.1-7 4.8c-8.8 6-17.9 12.3-27.5 19.2l-5.8 4.2-6.9 5-10-13.8 6.9-5c9.9-7.2 19.3-13.8 28.3-20l12.5-8.5z m644.5-42.5l7.8 3.6c9.4 4.3 18.7 8.9 27.9 13.6l9.2 4.8 7.5 4-8 15.1-7.5-4c-8.9-4.8-18-9.3-27.1-13.7l-9.2-4.3-7.7-3.6 7.1-15.5z m-563.7-4.1l7.6 15.2-7.6 3.8c-9.4 4.7-18.9 9.8-28.3 15.2l-7.2 4.2-7.3 4.3-8.7-14.7 7.4-4.4c9.8-5.7 19.5-11.1 29.2-16.1l7.3-3.7 7.6-3.8z m476.2-28.2l8.1 2.5c9.9 3.1 19.8 6.3 29.6 9.8l9.7 3.6 8 3-6 16-8-3c-9.5-3.5-19-6.9-28.6-10l-9.7-3.1-8.1-2.5 5-16.3z m-388.6-5l4.9 16.4-8.2 2.4c-10.4 3.1-20.6 6.5-30.6 10.2l-7.5 2.8-8 3.1-6.1-15.9 7.9-3.1c10.3-4 20.7-7.6 31.4-11l8-2.5 8.2-2.4z m314.9-12.4l8.3 1.6c5.2 1 10.3 2 15.5 3.2l7.7 1.7 8.3 1.9-3.8 16.6-8.3-1.9c-5-1.1-10-2.2-15-3.2l-7.6-1.5-8.4-1.7 3.3-16.7z m-223.1-5.6l2.2 17-8.4 1.1c-11 1.5-21.7 3.2-32.1 5.1l-7.8 1.5-8.4 1.6-3.3-16.7 8.3-1.7c10.6-2.1 21.5-4 32.6-5.6l8.4-1.1 8.5-1.2z",fill:"#cdcdcd",stroke:"none",strokeWidth:"8.533333333333333"}),i.createElement("path",{d:"M779.6 508.9l7.1 4.8c9.4 6.3 18.5 12.9 27.2 19.6l6.4 5.1 6.6 5.4-10.7 13.2-6.6-5.3c-8.2-6.6-16.7-13-25.7-19.3l-6.7-4.6-7.1-4.7 9.5-14.2z m-542.8 4.5l9.9 13.9-6.9 4.9c-6.5 4.6-12.9 9.4-19.1 14.3l-6 5-6.6 5.4-10.9-13.1 6.6-5.4c6.3-5.2 12.7-10.3 19.4-15.2l6.7-4.9 6.9-4.9z m82.3-45.2l7 15.6-7.8 3.5c-9.8 4.4-19.5 9.2-28.9 14.2l-7 3.9-7.5 4.1-8.3-14.9 7.5-4.2c9.7-5.4 19.6-10.5 29.6-15.2l7.6-3.5 7.8-3.5z m377.3-2.5l7.9 3.3c10.3 4.4 20.3 9.1 30.2 14.1l7.4 3.9 7.5 3.9-8 15.1-7.5-4c-9.4-5-19.1-9.7-28.9-14l-7.5-3.3-7.8-3.4 6.7-15.6z m-288-26.2l3.9 16.6-8.3 2c-10.5 2.5-20.8 5.3-31 8.5l-7.7 2.5-8.1 2.6-5.3-16.2 8.1-2.7c10.5-3.5 21.2-6.6 32-9.3l8.1-2 8.3-2z m198.4-1.3l8.3 1.9c10.8 2.4 21.6 5.2 32.3 8.4l8 2.4 8.1 2.6-5.1 16.2-8.2-2.5c-10.3-3.2-20.6-6.1-31-8.7l-7.8-1.8-8.3-1.9 3.7-16.6z",fill:"#cdcdcd",stroke:"none",strokeWidth:"8.533333333333333"}),i.createElement("path",{d:"M690.5 661.1l6.8 5c9.9 7.3 19.1 15.1 27.8 23.6l4.2 4.2 6 6.1-12.2 11.9-6-6.1c-7.8-8-16.3-15.5-25.3-22.5l-4.6-3.4-6.9-5.1 10.2-13.7z m-345.1-6.4l9.5 14.1-7.1 4.8c-9.4 6.3-18.4 13.3-26.8 20.8l-4.2 3.8-6.2 5.9-11.7-12.5 6.3-5.8c8.9-8.3 18.3-15.9 28.1-22.9l5-3.5 7.1-4.7z m259.2-33.7l8.1 2.5c11.5 3.5 22.9 7.8 33.9 12.9l5.5 2.5 7.7 3.7-7.4 15.4-7.7-3.7c-10.2-4.9-20.8-9.2-31.6-12.7l-5.4-1.7-8.1-2.5 5-16.4z m-171.2-1.8l4 16.6-8.3 2c-11 2.6-21.9 6-32.4 10.2l-5.3 2.1-7.9 3.3-6.5-15.8 7.8-3.3c11.2-4.7 22.6-8.5 34.4-11.6l5.9-1.5 8.3-2z",fill:"#cdcdcd",stroke:"none",strokeWidth:"8.533333333333333"}),i.createElement("path",{d:"M512 181.8c-1.7 0-3.4 0.1-5.1 0.2-42.1 2.8-74 39.2-71.2 81.3l24.8 373.8c1.8 27.1 24.3 48.2 51.5 48.2 27.2 0 49.7-21.1 51.5-48.2l24.8-373.8c0.1-1.7 0.2-3.4 0.1-5 0-42.2-34.2-76.4-76.4-76.5z m0 17.1c32.8 0 59.4 26.6 59.4 59.4 0 1.3 0 2.6-0.2 3.9l-24.8 373.8c-1.2 18.1-16.3 32.2-34.4 32.2-18.2 0-33.2-14.1-34.4-32.2l-24.8-373.8c-2.2-32.7 22.6-61 55.3-63.2 1.3-0.1 2.6-0.1 3.9-0.1z",fill:"#cdcdcd",stroke:"none",strokeWidth:"8.533333333333333"}),i.createElement("path",{d:"M512 731.2c-30.6 0-55.5 24.8-55.5 55.5 0 30.6 24.8 55.5 55.5 55.5 30.6 0 55.5-24.8 55.5-55.5 0-30.6-24.8-55.5-55.5-55.5z m0 17.1c21.2 0 38.4 17.2 38.4 38.4 0 21.2-17.2 38.4-38.4 38.4-21.2 0-38.4-17.2-38.4-38.4 0-21.2 17.2-38.4 38.4-38.4z",fill:"#cdcdcd",stroke:"none",strokeWidth:"8.533333333333333"})))),i.createElement("div",{className:c().title},e||g("Title")),i.createElement("div",{className:c().desc},n||g("Desc")),i.createElement(a.Z,{type:u.SC.border,disable:p,className:o()(c().btn,l),onClick:h},r||g("BtnText")))}))},88931:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var i=n(96526);function r(t){(0,i.useEffect)((function(){return t()}),[])}},53225:function(t,e,n){"use strict";var i=n(96526);e.Z=function(t){var e=(0,i.useRef)();return(0,i.useEffect)((function(){e.current=t}),[t]),e.current}},59938:function(t,e,n){"use strict";var i=n(96526);e.Z=function(t){var e=(0,i.useRef)(t);return e.current=t,e}},71077:function(t,e,n){"use strict";n.d(e,{W:function(){return o}});var i,r=n(52143),o=function(){return i||(i=(0,r.createDefaultAxios)({pageInfo:{}})),i}},80338:function(t,e,n){"use strict";n.d(e,{_:function(){return i}});n(4256),n(17385);function i(t){return new Promise((function(e){setTimeout((function(){e(null)}),t)}))}},3e3:function(t,e,n){"use strict";var i=n(4288).start,r=n(12561);t.exports=r("trimStart")?function(){return i(this)}:"".trimStart},54422:function(t,e,n){"use strict";var i=n(55532),r=n(3e3);i({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==r},{trimLeft:r})},97751:function(t,e,n){"use strict";n(54422);var i=n(55532),r=n(3e3);i({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==r},{trimStart:r})}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/7036_2592379ef8c34dd6.js.map